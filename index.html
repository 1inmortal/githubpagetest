<!DOCTYPE html>
<html lang="es" data-theme="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>CyberLab Overdrive Dashboard – Interfaz Holográfica v2.0</title>

  <!-- Firma del autor -->
  <meta name="author" content="Adaptado por IA a partir de diseños de Ing. Espinosa Martínez José Armando">
  <meta name="copyright" content="© 2024 CyberLab. Based on design © 2025 Ing. Espinosa Martínez José Armando">

  <!-- Favicon (Optional) -->
  <!-- <link rel="icon" href="IMG/FAVICON/LOGO.png" type="image/x-icon" /> -->

  <!-- Importación de fuentes -->
  <link href="https://fonts.googleapis.com/css?family=Share+Tech+Mono|VT323" rel="stylesheet">
  <!-- Bootstrap CSS (Mantenido para estructura base si se necesita, pero menos dependiente) -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <!-- Font Awesome para Iconos -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <!-- ============================================================ -->
  <!-- CSS Styles (Enhanced Visual Details)                         -->
  <!-- ============================================================ -->
  <style>
    
    /* ============================================================
       :root VARIABLES & THEMES
       ------------------------------------------------------------
       Refined colors and HUD variables
    ============================================================ */
    :root {
      --hue: 160; /* Cyan/Green */
      --saturation: 100%;
      --brightness-accent: 50%;
      --brightness-bg: 5%;
      --brightness-text: 95%;
      --brightness-muted: 70%;
      --brightness-feedback-success: 60%;
      --brightness-feedback-error: 60%;
      --brightness-feedback-warning: 60%;

      /* Base Colors */
      --color-bg: hsla(var(--hue), var(--saturation), var(--brightness-bg), 1);
      --color-accent: hsla(var(--hue), var(--saturation), var(--brightness-accent), 1);
      --color-accent-glow: hsla(var(--hue), var(--saturation), calc(var(--brightness-accent) + 10%), 0.7); /* Stronger glow */
      --color-accent-dark: hsla(var(--hue), var(--saturation), calc(var(--brightness-accent) - 15%), 1);
      --color-text: hsla(var(--hue), 10%, var(--brightness-text), 1);
      --color-muted: hsla(var(--hue), 10%, var(--brightness-muted), 1);
      --color-border: hsla(var(--hue), var(--saturation), calc(var(--brightness-accent) / 2), 0.3);
      --color-glass-bg: hsla(var(--hue), 30%, 15%, 0.15); /* Slightly more opaque glass */
      --color-glass-hover: hsla(var(--hue), 40%, 20%, 0.25); /* Glass background on hover */

      /* RGB for Shadows/Glows */
      --color-accent-rgb: 0, 255, 170;

      /* Transitions */
      --transition-fast: 0.2s;
      --transition-medium: 0.4s;
      --transition-slow: 0.7s;

      /* Fonts */
      --font-main: 'Share Tech Mono', monospace;
      --font-heading: 'VT323', monospace;

      /* HUD Variables */
      --hud-border-width: 2px;
      --hud-corner-size: 25px; /* Slightly larger corners */
      --hud-line-thickness: 1px;
      --hud-glow: 0 0 6px var(--color-accent-glow), 0 0 12px var(--color-accent-glow); /* Stronger glow */
      --hud-text-shadow: 0 0 4px var(--color-accent-glow); /* Subtle text glow */

      /* Corner Dots & Scan Animation Variables */
      --hud-dot-size: 2px;
      --hud-scan-speed: 1s;
      --hud-scan-width: 10px;
      --hud-dot-color: hsla(var(--hue), var(--saturation), calc(var(--brightness-accent) + 20%), 0.8); /* Brighter dot color */
      --hud-noise-color: hsla(var(--hue), var(--saturation), calc(var(--brightness-accent) + 30%), 0.5); /* Color for noise blocks */
      --hud-data-streak-color: hsla(var(--hue), var(--saturation), calc(var(--brightness-accent) + 40%), 0.9); /* Brighter color for streaks */


      /* Breakpoints */
      --mobile-break: 768px;
      --tablet-break: 1024px;
    }

    /* Light Theme */
    [data-theme="light"] {
      --hue: 200; /* Blue */
      --saturation: 50%;
      --brightness-bg: 95%;
      --brightness-accent: 45%;
      --brightness-text: 10%;
      --brightness-muted: 40%;
      --brightness-feedback-success: 40%;
      --brightness-feedback-error: 50%;
      --brightness-feedback-warning: 50%;

      /* Recalculate colors */
      --color-bg: hsla(var(--hue), 20%, var(--brightness-bg), 1);
      --color-accent: hsla(var(--hue), 80%, var(--brightness-accent), 1);
      --color-accent-glow: hsla(var(--hue), 80%, calc(var(--brightness-accent) + 10%), 0.6);
      --color-accent-dark: hsla(var(--hue), 80%, calc(var(--brightness-accent) - 15%), 1);
      --color-text: hsla(var(--hue), 10%, var(--brightness-text), 1);
      --color-muted: hsla(var(--hue), 10%, var(--brightness-muted), 1);
      --color-border: hsla(var(--hue), 50%, calc(var(--brightness-accent)), 0.3);
      --color-glass-bg: hsla(var(--hue), 30%, 85%, 0.25);
      --color-glass-hover: hsla(var(--hue), 40%, 75%, 0.35);
      --color-accent-rgb: 0, 170, 255;

      --color-feedback-success: hsla(120, 70%, var(--brightness-feedback-success), 1);
      --color-feedback-error: hsla(0, 100%, var(--brightness-feedback-error), 1);
      --color-feedback-warning: hsla(45, 100%, var(--brightness-feedback-warning), 1);

       /* Corner Dots & Scan Animation Variables - Light Theme */
      --hud-dot-color: hsla(var(--hue), var(--saturation), calc(var(--brightness-accent) - 10%), 0.8); /* Darker dot color */
      --hud-noise-color: hsla(var(--hue), var(--saturation), calc(var(--brightness-accent) - 20%), 0.5); /* Darker noise */
      --hud-data-streak-color: hsla(var(--hue), var(--saturation), calc(var(--brightness-accent) - 30%), 0.9); /* Darker streaks */
    }

    /* ============================================================
       RESET & GENERAL STYLES
       ------------------------------------------------------------
    ============================================================ */
    *, *::before, *::after {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html {
      scroll-behavior: smooth;
      font-size: 16px;
      overflow-y: scroll; /* Always show scrollbar */
    }

    body {
      font-family: var(--font-main);
      background-color: var(--color-bg);
      color: var(--color-text);
      overflow-x: hidden;
      position: relative;
      min-height: 100vh;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      cursor: url("IMG/CURSORS/cursor1.cur"), auto; /* Ensure path is correct */
      transition: background-color var(--transition-medium), color var(--transition-medium);
       /* Add subtle noise background */
       /* background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCAxMDAgMTAwJz48ZmlsdGVyIGlkPSduJyB4PScwJyB5PScwJz48ZmVUdXJidWxlbmNlIHR5cGU9J2ZyYWN0YWxOb2lzZScgYmFzZUZyZXF1ZW5jeT0nMC42Jycgc3RpdWNoVGltZXNAJzQnIHRhYmxlVGltZXM9JzQnIHR5cGU9J3R1cmJ1bGVuY2UnIG51bU9jdGF2ZXM9JzInIHNlZWQ9JzAnPjwvZmVUdXJidWxlbmNlPjwvZmlsdGVyPjxyZWN0IHdpZHRoPSc surpriseicnicr.org) height='100%' filter='url(#n)' opacity='0.05'></rect></svg>'); */ /* Example SVG noise */
    }

    /* Selection Style */
    ::selection {
      background-color: var(--color-accent);
      color: var(--color-bg);
      text-shadow: none;
    }

    a, button {
      text-decoration: none;
      color: inherit;
      cursor: pointer;
      background: none;
      border: none;
      font-family: inherit;
      outline: none; /* Remove default outline */
    }
     a:focus, button:focus {
         outline: 1px dashed var(--color-accent); /* Add focus outline */
     }


    img, video {
      max-width: 100%;
      height: auto;
      display: block;
      object-fit: cover;
    }

    /* Lazy Loading */
    img[data-src] {
        opacity: 0;
        transition: opacity 0.5s ease-in-out;
    }
    img.loaded { opacity: 1; }

    ul, li { list-style: none; }

    /* Hide elements initially */
    #mainHeader, .main-content-wrapper, .hud-overlay {
      opacity: 0;
      transition: opacity var(--transition-slow) ease-in-out;
    }
    #mainHeader.visible, .main-content-wrapper.visible, .hud-overlay.visible {
      opacity: 1;
    }

    /* Video Background */
    #bg-video {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      z-index: -2;
      opacity: 0.15;
      filter: grayscale(50%) brightness(0.7);
    }

     /* Particles JS */
    #particles-js {
        position: fixed;
        width: 100%;
        height: 100%;
        top: 0;
        left: 0;
        z-index: -1;
        pointer-events: none;
    }


    /* ============================================================
       LOADER STYLES
       ------------------------------------------------------------
    ============================================================ */
    .loader-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: var(--color-bg);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 99999;
      opacity: 1;
      visibility: visible;
      transition: opacity var(--transition-slow) ease-in-out, visibility var(--transition-slow) step-end;
    }

    .loader-overlay:not(.active) {
      opacity: 0;
      visibility: hidden;
      transition: opacity var(--transition-slow) ease-in-out, visibility 0s var(--transition-slow);
    }

    .loader-hud-border {
      position: absolute;
      top: 20px; left: 20px; right: 20px; bottom: 20px;
      border: var(--hud-border-width) solid var(--color-border);
      pointer-events: none;
      box-shadow: inset 0 0 15px rgba(var(--color-accent-rgb), 0.1);
    }

    .loader-scanline {
      position: absolute;
      top: 0; left: 0; width: 100%; height: 3px;
      background: var(--color-accent);
      box-shadow: var(--hud-glow);
      opacity: 0.7;
      animation: scan 3s linear infinite;
      z-index: 1;
        /* [SCANLINE_DETAIL] Barrido con Detalle de Puntos */
        background: repeating-linear-gradient(90deg, var(--color-accent) 0px, var(--color-accent) 2px, transparent 2px, transparent 4px);
         background-size: 10px 3px; /* Control size of the repeating pattern */
        animation: scan 3s linear infinite, texture-scan 1s linear infinite; /* Combine animations */
    }

    @keyframes scan {
      0% { transform: translateY(0); }
      50% { transform: translateY(calc(100vh - 3px)); }
      100% { transform: translateY(0); }
    }
     /* Animation for the scanline texture */
     @keyframes texture-scan {
         0% { background-position: 0 0; }
         100% { background-position: 10px 0; } /* Move the pattern */
     }


    .loader-content {
      position: relative;
      z-index: 2;
      text-align: center;
      color: var(--color-accent);
      max-width: 80%;
    }

    .loader-logo {
      font-family: var(--font-heading);
      font-size: 2rem;
      margin-bottom: 20px;
      letter-spacing: 4px;
      text-shadow: var(--hud-glow);
      animation: pulse-text 2s infinite alternate;
    }

    @keyframes pulse-text {
      from { opacity: 0.7; }
      to { opacity: 1; }
    }

    .loader-text, .loader-subtext {
      font-family: var(--font-main);
      font-size: 1.2rem;
      margin-bottom: 15px;
      text-transform: uppercase;
      letter-spacing: 1px;
      /* Typewriter cursor */
      position: relative;
      display: inline-block; /* Ensure pseudo-element is positioned correctly */
    }
     /* Blinking cursor for loader text */
    .loader-text::after, .loader-subtext::after {
        content: '|'; /* Cursor character */
        color: var(--color-accent);
        display: inline-block;
        animation: cursor-blink 1s steps(1, start) infinite;
    }

     @keyframes cursor-blink {
         0%, 100% { opacity: 1; }
         50% { opacity: 0; }
     }


    .loader-bar-container {
      width: 100%; max-width: 400px; height: 10px;
      background: rgba(var(--color-accent-rgb), 0.1);
      border: 1px solid var(--color-border);
      border-radius: 2px;
      overflow: hidden;
      margin: 15px auto;
      box-shadow: inset 0 0 5px rgba(0,0,0,0.5);
    }

    .loader-bar {
      width: 0%; height: 100%;
      background: var(--color-accent);
      box-shadow: var(--hud-glow);
      transition: width 0.1s linear;
    }

    .loader-percentage {
      font-family: var(--font-main);
      font-size: 1rem;
      margin-bottom: 10px;
    }


    /* ============================================================
       HUD OVERLAY STYLES
       ------------------------------------------------------------
       Includes new corner dot and scan animations
    ============================================================ */
    .hud-overlay {
      position: fixed;
      top: 0; left: 0; width: 100%; height: 100%;
      pointer-events: none; /* Crucial: allows clicks to pass through */
      z-index: 1000;
      overflow: hidden;
    }

    /* Decorative Corners */
    .hud-corner {
      position: absolute;
      width: var(--hud-corner-size); height: var(--hud-corner-size);
      border-style: solid;
      border-color: var(--color-accent);
      opacity: 0.7;
      pointer-events: none; /* Ensure corners don't block events */
      /* Subtle animation */
      animation: corner-pulse 4s infinite alternate ease-in-out;
      overflow: hidden; /* Clip pseudo-element scans */
    }
    .hud-corner.top-left { top: 15px; left: 15px; border-width: var(--hud-border-width) 0 0 var(--hud-border-width); }
    .hud-corner.top-right { top: 15px; right: 15px; border-width: var(--hud-border-width) var(--hud-border-width) 0 0; animation-delay: 0.5s; }
    .hud-corner.bottom-left { bottom: 15px; left: 15px; border-width: 0 0 var(--hud-border-width) var(--hud-border-width); animation-delay: 1s; }
    .hud-corner.bottom-right { bottom: 15px; right: 15px; border-width: 0 var(--hud-border-width) var(--hud-border-width) 0; animation-delay: 1.5s; }

    @keyframes corner-pulse {
        0%, 100% { opacity: 0.7; transform: scale(1); }
        50% { opacity: 0.9; transform: scale(1.05); }
    }

    /* [HUD_CORNER_SCAN] Barridos de Puntos en las Esquinas - CSS Implementation */
    .hud-corner::before {
        content: '';
        position: absolute;
        background: repeating-linear-gradient(
          to right,
          var(--hud-dot-color) 0 2px,
          transparent 2px 4px
        );
        width: var(--hud-scan-width);
        height: var(--hud-line-thickness);
        animation: corner-scan var(--hud-scan-speed) ease-in-out infinite;
    }
     /* Specific positioning and animation for each corner's pseudo-element */
    .hud-corner.top-left::before {
        width: var(--hud-scan-width); height: var(--hud-line-thickness);
        top: calc(var(--hud-border-width) / -2); left: calc(var(--hud-border-width) / -2);
        transform-origin: top left;
        animation-name: corner-scan-tl;
    }
     .hud-corner.top-right::before {
        width: var(--hud-scan-width); height: var(--hud-line-thickness);
        top: calc(var(--hud-border-width) / -2); right: calc(var(--hud-border-width) / -2);
        transform-origin: top right;
        animation-name: corner-scan-tr; animation-delay: calc(var(--hud-scan-speed) * 0.25);
    }
     .hud-corner.bottom-left::before {
         width: var(--hud-line-thickness); height: var(--hud-scan-width);
         bottom: calc(var(--hud-border-width) / -2); left: calc(var(--hud-border-width) / -2);
         transform-origin: bottom left;
         animation-name: corner-scan-bl; animation-delay: calc(var(--hud-scan-speed) * 0.5);
     }
     .hud-corner.bottom-right::before {
         width: var(--hud-line-thickness); height: var(--hud-scan-width);
         bottom: calc(var(--hud-border-width) / -2); right: calc(var(--hud-border-width) / -2);
         transform-origin: bottom right;
         animation-name: corner-scan-br; animation-delay: calc(var(--hud-scan-speed) * 0.75);
     }

     @keyframes corner-scan-tl {
         0% { transform: translateX(0); }
         100% { transform: translateX(calc(var(--hud-corner-size) + var(--hud-border-width))); }
     }
      @keyframes corner-scan-tr {
          0% { transform: translateX(0); }
          100% { transform: translateX(calc(-1 * (var(--hud-corner-size) + var(--hud-border-width)))); }
      }
      @keyframes corner-scan-bl {
          0% { transform: translateY(0); }
          100% { transform: translateY(calc(-1 * (var(--hud-corner-size) + var(--hud-border-width)))); }
      }
      @keyframes corner-scan-br {
          0% { transform: translateY(0); }
          100% { transform: translateY(calc(var(--hud-corner-size) + var(--hud-border-width))); }
      }


    /* [HUD_PIXEL_DRIFT] & [NOISE_FIELD] & [INTERACTION_BURST] & [SYSTEM_GLITCH_PIXELS] - CSS for the dynamically generated elements */
    .hud-dynamic-bit {
        position: absolute;
        background-color: var(--hud-dot-color);
        pointer-events: none; /* Do not block clicks */
        opacity: 0; /* Starts hidden */
        /* Size, shape, and animation handled by JS for variations */
    }
     /* Specific style for noise blocks */
     .hud-dynamic-bit.noise {
         background-color: var(--hud-noise-color);
         width: 3px; /* Example size */
         height: 3px;
         border-radius: 0; /* Square */
     }
      /* Specific style for small dots */
     .hud-dynamic-bit.dot {
         width: var(--hud-dot-size);
         height: var(--hud-dot-size);
         border-radius: 50%; /* Circle */
     }
      /* Specific style for data streaks */
     .hud-dynamic-bit.streak {
         background-color: var(--hud-data-streak-color);
         width: 1px; /* Thin line */
         height: 5px;
         border-radius: 0;
     }
      /* Specific style for glitch pixels */
      .hud-dynamic-bit.glitch {
          width: 1px;
          height: 1px;
          background-color: var(--color-feedback-error); /* Red/Error color */
          opacity: 0.7;
          animation: glitch-pixel-fade 0.1s ease-out forwards; /* Very short animation */
      }


    /* Decorative Lines */
    .hud-line {
      position: absolute;
      background-color: var(--color-border);
      box-shadow: 0 0 3px var(--color-border);
      opacity: 0.5;
      pointer-events: none;
        /* [DATA_STREAK] Ráfagas de Datos Emergentes - CSS Implementation for lines */
        overflow: hidden; /* To hide pseudo-element movement */
    }
    .hud-line.top { top: 25px; left: calc(15px + var(--hud-corner-size)); right: calc(15px + var(--hud-corner-size)); height: var(--hud-line-thickness); }
    .hud-line.bottom { bottom: 25px; left: calc(15px + var(--hud-corner-size)); right: calc(15px + var(--hud-corner-size)); height: var(--hud-line-thickness); }
    .hud-line.left { left: 25px; top: calc(15px + var(--hud-corner-size)); bottom: calc(15px + var(--hud-corner-size)); width: var(--hud-line-thickness); }
    .hud-line.right { right: 25px; top: calc(15px + var(--hud-corner-size)); bottom: calc(15px + var(--hud-corner-size)); width: var(--hud-line-thickness); }

    /* Data streak pseudo-elements on lines */
    .hud-line::before {
        content: '';
        position: absolute;
        background: linear-gradient(
          to right,
          transparent 0%,
          var(--color-accent-glow) 50%,
          transparent 100%
        );
        opacity: 0.6;
        animation: line-burst 1.5s ease-in-out infinite;
    }
    @keyframes line-burst {
      0%   { transform: translateX(-100%); opacity: 0; }
      50%  { opacity: 1; }
      100% { transform: translateX(100%); opacity: 0; }
    }
     .hud-line.top::before, .hud-line.bottom::before {
         width: 10px; height: 100%;
         top: 0; left: 0;
     }
     .hud-line.left::before, .hud-line.right::before {
         width: 100%; height: 10px;
         left: 0; top: 0;
     }
      /* Specific line streak animations */
      .hud-line.top::before { animation-name: line-streak-h; }
      .hud-line.bottom::before { animation-name: line-streak-h; animation-delay: 1s; } /* Different delay */
      .hud-line.left::before { animation-name: line-streak-v; }
      .hud-line.right::before { animation-name: line-streak-v; animation-delay: 2s; } /* Different delay */

       @keyframes line-streak-h {
           0% { transform: translateX(-100%); }
           100% { transform: translateX(100vw); } /* Move across the viewport width */
       }
        @keyframes line-streak-v {
            0% { transform: translateY(-100%); }
            100% { transform: translateY(100vh); } /* Move across the viewport height */
        }


    /* Info Readouts */
    .hud-readout {
      position: absolute;
      font-family: var(--font-main);
      font-size: 0.75rem;
      color: var(--color-muted);
      padding: 5px 10px;
      background: rgba(var(--color-bg), 0.5);
      text-transform: uppercase;
      letter-spacing: 1px;
      border: 1px solid var(--color-border); /* Added border */
      border-radius: 3px;
      -webkit-backdrop-filter: blur(4px); /* Added prefix */
      backdrop-filter: blur(4px); /* Subtle blur on readouts */
      pointer-events: none; /* Do not block events */
        /* [BUFFER_GLOW] Pulso de Buffer en Zonas Estratégicas */
        animation: readout-buffer 4s infinite ease-in-out;
    }
     @keyframes readout-buffer {
         0%, 100% { box-shadow: none; }
         50% { box-shadow: 0 0 5px rgba(var(--color-accent-rgb), 0.5); }
     }

    .hud-readout span:first-child { color: var(--color-accent); margin-right: 5px;}
    .hud-readout .hud-ok { color: var(--color-feedback-success); animation: status-flicker 3s infinite alternate steps(5); }
    .hud-readout .hud-warning { color: var(--color-feedback-warning); animation: status-flicker 2s infinite alternate steps(3); }
    .hud-readout .hud-error { color: var(--color-feedback-error); animation: status-flicker 1s infinite alternate steps(2); }

     @keyframes status-flicker {
         0%, 100% { opacity: 1; }
         50% { opacity: 0.5; }
     }


    .top-left-readout { top: 40px; left: 40px; }
    .top-right-readout { top: 40px; right: 40px; text-align: right;}
    .bottom-left-readout { bottom: 40px; left: 40px; }
    .bottom-right-readout { bottom: 40px; right: 40px; text-align: right;}

    /* ============================================================
       MAIN CONTENT & SECTION STYLES
       ------------------------------------------------------------
       Includes section scan animation on reveal
    ============================================================ */
    .main-content-wrapper {
      position: relative;
      z-index: 1;
      padding-top: 100px;
      padding-bottom: 80px;
    }

    .section-container {
      padding: 100px 5%;
      max-width: 1400px;
      margin-left: auto;
      margin-right: auto;
      position: relative; /* Needed for pseudo-elements */
      margin-top: 50px;
      /* Enhanced section divider */
       border-bottom: 1px dashed rgba(var(--color-accent-rgb), 0.15);
       padding-bottom: 50px; /* Add space above the divider */
       overflow: hidden; /* Clip section scan */
    }
     /* Remove top margin for the first section */
    .section-container:first-of-type { margin-top: 0; padding-top: 0;} /* Assuming Hero handles its own padding */

     /* Remove bottom border for the last section (Contact or Footer if inside wrapper) */
     /* Need to be careful if footer is inside the wrapper */
     .main-content-wrapper > .section-container:last-of-type {
         border-bottom: none;
         padding-bottom: 0;
     }

     /* [SECTION_ENTRY_SCAN] Barrido al Revelar Sección - CSS Implementation */
     .section-container::before {
         content: '';
         position: absolute;
         top: 0; left: 0; width: 100%; height: 2px;
         background: linear-gradient(to right, transparent, var(--color-accent-glow), transparent);
         transform: translateX(-100%);
         opacity: 0;
         pointer-events: none;
        /* [SCANLINE_DETAIL] - Add texture */
         background: repeating-linear-gradient(90deg, var(--color-accent) 0px, var(--color-accent) 1px, transparent 1px, transparent 3px);
         background-size: 8px 2px;
     }
     .section-container.visible::before {
         animation: section-scan-in var(--transition-slow) ease-out forwards, texture-scan 0.8s linear infinite;
     }
     @keyframes section-scan-in {
         0% { transform: translateX(-100%); opacity: 0; }
         30% { opacity: 1; }
         100% { transform: translateX(0%); opacity: 0; }
     }
     /* Optional second scan line at the bottom */
     .section-container::after {
        content: '';
        position: absolute;
        bottom: 0; left: 0; width: 100%; height: 2px;
        background: linear-gradient(to right, transparent, var(--color-accent-glow), transparent);
        transform: translateX(100%);
        opacity: 0;
        pointer-events: none;
        /* [SCANLINE_DETAIL] - Add texture */
         background: repeating-linear-gradient(90deg, var(--color-accent) 0px, var(--color-accent) 1px, transparent 1px, transparent 3px);
         background-size: 8px 2px;
    }
    .section-container.visible::after {
        animation: section-scan-out var(--transition-slow) ease-out forwards, texture-scan 0.8s linear infinite reverse; /* Reverse texture scan direction */
    }
     @keyframes section-scan-out {
         0% { transform: translateX(100%); opacity: 0; }
         30% { opacity: 1; }
         100% { transform: translateX(0%); opacity: 0; }
     }


    /* Content Box Styles */
    .content-box {
      background: var(--color-glass-bg);
      border: 1px solid var(--color-border);
      border-radius: 5px;
      padding: 25px;
      -webkit-backdrop-filter: blur(10px); /* Added prefix */
      backdrop-filter: blur(10px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
      transition: transform var(--transition-medium), box-shadow var(--transition-medium), background-color var(--transition-medium), border-color var(--transition-fast);
      position: relative; /* Needed for potential pseudo-elements */
      overflow: hidden; /* Hide scanline overflow */
      animation: readout-buffer 6s infinite ease-in-out;
    }
    .content-box:hover {
      transform: translateY(-8px); /* More pronounced hover */
      box-shadow: 0 12px 25px rgba(0,0,0,0.3), 0 0 20px var(--color-accent-glow); /* Stronger glow */
      background-color: var(--color-glass-hover); /* Different glass background on hover */
      border-color: var(--color-accent); /* Accent border on hover */
    }
     /* Subtle animated scanline on hover */
     /* Removed redundant scanlines from content-box, keeping it simple or using a different effect */
     /* Let's stick to border/shadow transitions for content-box hover for simplicity */

    .content-box::before {
      content:'';
      position:absolute;
      top:0; left:0; width:100%; height:3px;
      background: var(--color-accent);
      transform: scaleX(0);
      transform-origin: left center;
      opacity: 0;
    }
    .content-box:hover::before,
    .content-box.scanned::before {
      animation: box-scan 0.6s ease-out forwards;
    }
    @keyframes box-scan {
      0%   { transform: scaleX(0); opacity: 0; }
      30%  { opacity: 1; }
      100% { transform: scaleX(1); opacity: 0; }
    }


    /* ============================================================
       HEADER STYLES
       ------------------------------------------------------------
    ============================================================ */
    #mainHeader {
      position: fixed;
      top: 0; left: 0; width: 100%;
      padding: 10px 30px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      z-index: 1001;
      background: rgba(var(--color-bg), 0.9); /* More opaque header */
      -webkit-backdrop-filter: blur(15px); /* Added prefix */
      backdrop-filter: blur(15px);
      border-bottom: var(--hud-line-thickness) solid var(--color-border);
    }

    .branding a {
      font-family: var(--font-heading);
      font-size: 1.5rem;
      color: var(--color-accent);
      text-shadow: var(--hud-glow);
      letter-spacing: 2px;
      transition: color var(--transition-fast), text-shadow var(--transition-fast);
    }
    .branding a:hover {
      color: var(--color-text); /* White on hover */
      text-shadow: 0 0 10px var(--color-text);
    }

    .header-controls {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    /* HUD Button Style */
    .hud-button {
      font-family: var(--font-main);
      padding: 8px 15px;
      border: 1px solid var(--color-border);
      background: rgba(var(--color-accent-rgb), 0.1);
      color: var(--color-accent);
      font-size: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 1px;
      border-radius: 3px;
      transition: background var(--transition-fast), color var(--transition-fast), box-shadow var(--transition-fast), border-color var(--transition-fast);
      position: relative;
      overflow: hidden;
      outline: none;
    }
    .hud-button:hover {
      background: var(--color-accent);
      color: var(--color-bg);
      box-shadow: var(--hud-glow);
      border-color: var(--color-accent);
    }
    .hud-button:focus {
        outline: 2px dashed var(--color-text); /* Focus style */
        outline-offset: 2px;
    }
    .hud-button.small { padding: 5px 10px; font-size: 0.7rem; }
    .hud-button.large { padding: 12px 25px; font-size: 1rem; }

    /* [BUTTON_ACTIVATION] Pulso al Hacer Click en Botones - CSS Implementation */
    .hud-button.pulsing {
        animation: button-pulse 0.3s ease-out;
    }


    /* Primary Button */
    .hud-button.primary {
      background: var(--color-accent);
      color: var(--color-bg);
      border-color: var(--color-accent);
      box-shadow: var(--hud-glow);
    }
    .hud-button.primary:hover {
      background: var(--color-accent-dark);
      box-shadow: 0 0 15px var(--color-accent);
      border-color: var(--color-accent-dark);
    }

    /* Scanline Hover for Buttons */
    .hud-button::before { /* Use ::before for button scanline */
      content: '';
      position: absolute;
      top: 0;
      left: -150%;
      width: 50%;
      height: 100%;
      background: linear-gradient(to right, rgba(255,255,255,0) 0%, rgba(255,255,255,0.3) 50%, rgba(255,255,255,0) 100%);
      transform: skewX(-25deg);
      transition: left var(--transition-medium) ease-in-out;
      pointer-events: none; /* Do not block clicks */
    }
    .hud-button:hover::before { left: 150%; }


    /* Mute Button */
    #muteButton { display: inline-flex; align-items: center; justify-content: center; padding: 8px; }
    #muteButton svg { transition: opacity var(--transition-fast); }
    #muteButton svg.mute-slash { position: absolute; opacity: 0; color: var(--color-feedback-warning); } /* Use variable color */
    #muteButton.muted svg:not(.mute-slash) { opacity: 0.3; }
    #muteButton.muted svg.mute-slash { opacity: 1; }


    /* Filter Menu Overlay */
    .filter-container { position: static; }
    .filter-panel {
      position: fixed; top: 50%; left: 50%;
      width: 90%; max-width: 400px; max-height: 80vh;
      overflow-y: auto;
      background: rgba(var(--color-bg), 0.98); /* More opaque background */
      border: 1px solid var(--color-border);
      border-radius: 5px;
      padding: 25px;
      z-index: 10001;
      -webkit-backdrop-filter: blur(15px); /* Added prefix */
      backdrop-filter: blur(15px); /* Stronger blur */
      transform: translate(-50%, -50%) scale(0.9);
      opacity: 0; visibility: hidden;
      transition: transform var(--transition-medium) ease, opacity var(--transition-medium) ease, visibility 0s var(--transition-medium);
      transform-origin: center center;
      pointer-events: none; /* Disabled initially */
    }
    .filter-panel.open {
      transform: translate(-50%, -50%) scale(1);
      opacity: 1; visibility: visible;
      transition: transform var(--transition-medium) ease, opacity var(--transition-medium) ease, visibility 0s 0s;
      pointer-events: auto; /* Enabled when open */
    }
    .filter-panel .navbar-nav {
      display: flex; flex-direction: column; gap: 8px;
    }
    .filter-panel .nav-link {
      display: block; padding: 10px 15px;
      color: var(--color-muted); font-size: 1rem;
      border-radius: 3px;
      transition: background var(--transition-fast), color var(--transition-fast);
      position: relative; overflow: hidden; text-align: center;
    }
    .filter-panel .nav-link::before { /* Hover effect */
      content: ''; position: absolute; bottom: 0; left: 50%; transform: translateX(-50%);
      width: 0; height: 2px; background: var(--color-accent);
      transition: width var(--transition-medium) ease;
    }
    .filter-panel .nav-link:hover {
      background: rgba(var(--color-accent-rgb), 0.15); /* Slightly more background on hover */
      color: var(--color-accent);
    }
    .filter-panel .nav-link:hover::before { width: 80%; }

    /* Overlay for filter menu */
    .filter-overlay {
      position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
      background: rgba(0,0,0,0.9); /* Even darker overlay */
      -webkit-backdrop-filter: blur(8px); /* Added prefix */
      backdrop-filter: blur(8px); /* Stronger blur */
      opacity: 0; visibility: hidden;
      transition: opacity var(--transition-medium) ease, visibility 0s var(--transition-medium);
      z-index: 10000;
      pointer-events: none; /* Disabled initially */
    }
    .filter-overlay.open {
      opacity: 1; visibility: visible;
      transition: opacity var(--transition-medium) ease, visibility 0s 0s;
      pointer-events: auto; /* Enabled when open */
    }

    /* ============================================================
       SECTION SPECIFIC STYLES
       ------------------------------------------------------------
       Includes section scan animation on reveal
    ============================================================ */

    /* --- HERO --- */
    .hero {
      min-height: 100vh;
      display: flex; flex-direction: column; align-items: center; justify-content: center;
      text-align: center; padding: 0 5%; position: relative;
      margin-top: -100px;
      background: radial-gradient(ellipse at center, rgba(var(--color-bg), 0.6) 0%, transparent 80%), var(--color-bg); /* Wider gradient */
    }
    .hero h1 {
      font-family: var(--font-heading);
      font-size: clamp(2.5rem, 8vw, 5rem);
      margin-bottom: 20px; letter-spacing: 0.05em; position: relative;
      color: var(--color-accent);
      text-shadow: 0 0 10px var(--color-accent-glow), 0 0 20px var(--color-accent-glow), 0 0 30px rgba(var(--color-accent-rgb), 0.4); /* More intense glow */
      animation: text-flicker 3s linear infinite alternate;
    }
    /* Glitch Effect (Keep existing keyframes) */
     @keyframes glitch-anim-1 { /* ... */ }
     @keyframes glitch-anim-2 { /* ... */ }
     @keyframes text-flicker { /* ... */ }


    .hero p {
      font-size: clamp(1rem, 2.5vw, 1.3rem);
      max-width: 700px; line-height: 1.6;
      color: var(--color-muted); margin-top: 20px;
    }
    .scroll-down-indicator {
      position: absolute; bottom: 40px; left: 50%; transform: translateX(-50%);
      color: var(--color-accent); font-size: 1.5rem;
      animation: bounce 2s infinite; opacity: 0.7;
    }
    @keyframes bounce { 0%, 20%, 50%, 80%, 100% { transform: translateX(-50%) translateY(0); } 40% { transform: translateX(-50%) translateY(-10px); } 60% { transform: translateX(-50%) translateY(-5px); } }

    /* --- SECTION TITLES --- */
    .section-title {
      font-family: var(--font-heading); font-size: clamp(2rem, 5vw, 3rem);
      text-align: center; margin-bottom: 60px; position: relative; display: block;
      color: var(--color-accent);
      text-shadow: var(--hud-glow); letter-spacing: 2px; text-transform: uppercase;
    }
    /* Define los símbolos que aparecerán */
    .section-title::before,
    .section-title::after {
      content: '///';
      opacity: 0;
      color: var(--color-accent);
      font-size: 0.8em;
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      transition: none;
    }
    .section-title::before { left: -2em; }
    .section-title::after  { right: -2em; }

    /* Animación de parpadeo */
    @keyframes header-flash {
      0%,100% { opacity: 0; }
      10%,30% { opacity: 1; }
      20%,40% { opacity: 0; }
    }
    /* Al hacerse visible la sección, disparar la animación una vez */
    .section-container.visible .section-title::before,
    .section-container.visible .section-title::after {
      animation: header-flash 1s ease-out 1;
    }
    /* Reduce el movimiento si el usuario prefiere poca animación */
    @media (prefers-reduced-motion: reduce) {
      .section-title::before,
      .section-title::after {
        animation: none;
      }
    }

    /* --- ABOUT --- */
    .about-content {
      display: flex; flex-wrap: wrap; gap: 30px; align-items: center;
    }
    .about-text { flex: 1 1 55%; min-width: 300px; line-height: 1.7; }
    .about-text p { margin-bottom: 1em; }
    .about-image {
      flex: 1 1 35%; min-width: 250px;
      position: relative; padding: 0;
      border: none; background: none; box-shadow: none; -webkit-backdrop-filter: none; backdrop-filter: none; /* Ensure backdrop-filter is off if element doesn't need it */
    }
    .about-image img {
      border-radius: 5px;
      border: 2px solid var(--color-accent); /* Accent border */
      box-shadow: 0 0 15px rgba(var(--color-accent-rgb), 0.3), inset 0 0 10px rgba(var(--color-accent-rgb), 0.1); /* Glow and inner shadow */
      width: 100%; aspect-ratio: 1 / 1;
      transition: box-shadow var(--transition-medium);
    }
    .about-image img:hover {
         box-shadow: 0 0 25px rgba(var(--color-accent-rgb), 0.5), inset 0 0 15px rgba(var(--color-accent-rgb), 0.2);
    }

    .image-hud-overlay {
      position: absolute; bottom: 10px; right: 10px;
      background: rgba(var(--color-bg), 0.8); /* More opaque */
      padding: 3px 8px; font-size: 0.7rem;
      color: var(--color-accent); border-radius: 3px; font-family: var(--font-main);
      border: 1px solid var(--color-border); /* Added border */
      -webkit-backdrop-filter: blur(4px); /* Added prefix */
      backdrop-filter: blur(4px); /* Subtle blur */
    }

    /* --- SKILLS --- */
    .skills-grid {
      display: grid; gap: 25px;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    }
    .skill-item { text-align: center; }
    .skill-item img {
      width: 50px; height: 50px; margin: 0 auto 15px auto;
      filter: grayscale(70%) contrast(1.5) brightness(1.8); /* More filtered initially */
      transition: filter var(--transition-fast) ease, transform var(--transition-fast) ease;
    }
    .skill-item:hover img { filter: none; transform: scale(1.1); } /* Full color and slight scale on hover */
    .progress-bar-container {
      background: rgba(var(--color-accent-rgb), 0.1); height: 8px; /* Thicker bar */
      border-radius: 4px; /* More rounded */
      margin-top: 10px; overflow: hidden;
      border: 1px solid var(--color-border);
      position: relative;
    }
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, rgba(var(--color-accent-rgb), 0.3) 0%, var(--color-accent) 100%); /* Gradient fill */
      width: 0%;
      transition: width 1.5s ease-out;
      box-shadow: var(--hud-glow);
      /* [SKILL_PARTICLE_TRAIL] - Subtle sparkle effect */
      position: relative;
    }
     /* Subtle animated sparkle effect on the fill bar */
     .progress-fill::after {
         content:'';
         position:absolute; top:0; right:0;
         width:12px; height:100%;
         background: radial-gradient(
           circle at center,
           rgba(255,255,255,0.8) 0%,
           rgba(var(--color-accent-rgb),0.5) 50%,
           transparent 100%
         );
         transform: translateX(100%);
         animation: sparkle 1.2s ease-out forwards;
         animation-delay: 0.3s;
     }
      .progress-bar-container.animate-fill .progress-fill::after {
          animation-play-state: running; /* Run when fill animates */
          /* Adjust animation timing based on fill width */
          animation-duration: calc(1.5s * (100 / var(--skill-level))); /* Faster for shorter fills */
      }


     .progress-bar-container::after { /* Percentage label on the bar */
         content: attr(data-label) '%'; /* Expecting data-label from JS */
         position: absolute;
         top: -20px; right: 0;
         font-size: 0.75rem;
         color: var(--color-text); /* Use text color */
         font-family: var(--font-main);
     }

    .skill-level { margin-top: 8px; font-size: 0.8rem; color: var(--color-muted); } /* Slightly larger font */

    /* --- PROJECTS --- */
    .internal-search {
      display: flex; justify-content: center; margin-bottom: 40px;
      gap: 10px; padding: 15px;
      background: var(--color-glass-bg); /* Apply glass style */
      border: 1px solid var(--color-border);
      border-radius: 5px;
      -webkit-backdrop-filter: blur(8px); /* Added prefix */
      backdrop-filter: blur(8px);
      box-shadow: 0 3px 10px rgba(0,0,0,0.1);
    }
    .internal-search input {
      padding: 10px 15px; /* Larger padding */
      width: 350px; max-width: 70%;
      border-radius: 3px; border: 1px solid var(--color-border);
      background: rgba(var(--color-bg), 0.9); /* More opaque */
      color: var(--color-text); font-size: 0.95rem;
      transition: border-color var(--transition-fast), box-shadow var(--transition-fast);
      /* [INPUT_FOCUS_GLOW] Borde de Entrada en Foco - CSS Implementation */
      box-shadow: inset 0 0 5px rgba(0,0,0,0.3); /* Initial subtle inset shadow */
    }
    .internal-search input:focus {
        border-color: var(--color-accent);
        box-shadow: 0 0 8px rgba(var(--color-accent-rgb), 0.5), inset 0 0 5px rgba(var(--color-accent-rgb), 0.2); /* Outer glow + inner shadow */
        outline: none;
    }
    .internal-search input::placeholder { color: var(--color-muted); }
    .project-grid {
      display: grid; gap: 30px;
      grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    }
    .project-item { display: flex; flex-direction: column; }
    .project-item h3 { font-size: 1.3rem; color: var(--color-accent); margin-bottom: 10px; text-shadow: var(--hud-text-shadow); } /* Add text shadow */
    .project-item video { border-radius: 3px; margin-bottom: 15px; border: 1px solid var(--color-border); }
    .project-item p { color: var(--color-muted); font-size: 0.9rem; line-height: 1.5; flex-grow: 1; margin-bottom: 15px;}
    .tech-tags {
      display: flex; flex-wrap: wrap; gap: 5px; margin-top: auto;
    }
    .tech-tags span {
      background: rgba(var(--color-accent-rgb), 0.15);
      color: var(--color-accent);
      padding: 4px 8px; font-size: 0.75rem; /* Slightly larger */
      border-radius: 3px; border: 1px solid rgba(var(--color-accent-rgb), 0.3); /* Softer border */
    }

    /* --- TIMELINE --- */
    .timeline-list {
      display: flex; flex-direction: column; gap: 25px; /* Increased gap */
      max-width: 900px; margin: 0 auto; position: relative;
      padding-left: 40px; /* More space for the line */
    }
    /* Vertical line */
    .timeline-list::before {
      content:'';
      position:absolute;
      top:0; bottom:0; left:15px;
      width:2px;
      background: linear-gradient(
        to bottom,
        transparent 0%, var(--color-border) 20%, var(--color-border) 80%, transparent 100%
      );
      background-size: 100% 200%;
      animation: timeline-flow 10s linear infinite;
    }
    @keyframes timeline-flow {
      0%   { background-position: 0% 0%; }
      100% { background-position: 0% 100%; }
    }
    @media (prefers-reduced-motion: reduce) {
      .timeline-list::before { animation: none; }
    }
    .timeline-item {
      padding: 15px; /* Less padding inside */
      position: relative;
      background: var(--color-glass-bg); /* Apply glass style */
      border: 1px solid var(--color-border);
      border-radius: 5px;
      -webkit-backdrop-filter: blur(8px); /* Added prefix */
      backdrop-filter: blur(8px);
      box-shadow: 0 3px 10px rgba(0,0,0,0.1);
      padding-left: 30px; /* Space from the line */
      transition: border-color var(--transition-fast), box-shadow var(--transition-fast);
    }
     .timeline-item:hover {
         border-color: var(--color-accent);
         box-shadow: 0 3px 15px rgba(var(--color-accent-rgb), 0.3);
     }

    /* Circle on the line */
    .timeline-item::before {
      content: ""; position: absolute;
      top: 20px; /* Align with content */
      left: 11px; /* Center over the main line */
      width: 10px; height: 10px; /* Slightly smaller */
      background: var(--color-accent); /* Accent color dot */
      border: 2px solid var(--color-bg); /* Background color border */
      border-radius: 50%; z-index: 2; /* Ensure it's above the line */
      box-shadow: 0 0 5px var(--color-accent-glow);
      transition: box-shadow var(--transition-medium); /* Add transition for beacon effect */
    }
     .timeline-item:first-of-type::before { top: 15px; } /* Adjust first item dot */
     .timeline-item:last-of-type::before { top: calc(100% - 15px); } /* Adjust last item dot */

     /* [TIMELINE_BEACON] Punto Brillante en Cronología - CSS Implementation */
     .timeline-item.active-beacon::before {
         box-shadow: 0 0 10px var(--color-accent), 0 0 20px var(--color-accent-glow); /* Stronger glow */
         animation: beacon-pulse 2s infinite alternate ease-in-out; /* Add pulse animation */
     }


    .timeline-item h4 {
      font-size: 1.1rem; color: var(--color-text); margin-bottom: 8px;
    }
    .timeline-year {
      color: var(--color-accent); font-family: var(--font-heading);
      font-size: 1.4em; /* Slightly larger */
      margin-right: 10px; display: inline-block;
    }
    .timeline-item p { color: var(--color-muted); line-height: 1.6; font-size: 0.9rem; }

    /* --- ACHIEVEMENTS & CERTIFICATES --- */
    .achievements-grid, .certifications-grid {
      display: grid; gap: 30px;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    }
    .achievement-item { text-align: center; border: 1px dashed var(--color-border); /* Use dashed border */ padding: 20px; }
    .achievement-icon { font-size: 3rem; /* Larger icon */ margin-bottom: 15px; color: var(--color-accent); text-shadow: var(--hud-glow); }
    .achievement-item h4 { font-size: 1.2rem; /* Larger title */ color: var(--color-text); margin-bottom: 10px; text-shadow: var(--hud-text-shadow); }
    .achievement-item p { color: var(--color-muted); font-size: 0.9rem; line-height: 1.4; }

    .certification-item { padding: 0; position: relative; overflow: hidden; background: #000; }
    .certification-image { opacity: 0.5; transition: opacity var(--transition-medium); display: block; width: 100%; height: 200px; object-fit: cover; }
    .certification-item:hover .certification-image { opacity: 0.1; } /* More opaque overlay on hover */

     /* [CERT_OVERLAY_SCAN] Escaneo de Certificado al Pasar el Ratón - CSS Implementation */
     .certification-item::before {
         content: '';
         position: absolute;
         top: 0; left: -100%; width: 50%; height: 100%;
         background: linear-gradient(to right, transparent 0%, rgba(var(--color-accent-rgb), 0.3) 50%, transparent 100%);
         transform: skewX(-20deg);
         transition: none; /* Don't transition, only animate */
         opacity: 0;
         z-index: 2; /* Above image, below overlay */
     }
     .certification-item:hover::before {
         animation: cert-scan 0.6s linear forwards;
     }


    .certification-overlay {
      position: absolute; top: 0; left: 0; width: 100%; height: 100%;
      background: linear-gradient(rgba(var(--color-bg), 0.6), rgba(var(--color-bg), 0.95)); /* Stronger gradient */
      color: var(--color-text); border-radius: 0;
      opacity: 0; visibility: hidden;
      display: flex; flex-direction: column; justify-content: center; align-items: center;
      padding: 25px; text-align: center;
      transition: opacity var(--transition-medium) ease, visibility var(--transition-medium);
      z-index: 3; /* Ensure overlay is on top */
    }
    .certification-item:hover .certification-overlay { opacity: 1; visibility: visible; }
    .overlay-info h3 { font-size: 1.3rem; color: var(--color-accent); margin-bottom: 10px; text-shadow: var(--hud-text-shadow); }
    .overlay-info p { font-size: 0.9rem; line-height: 1.3; color: var(--color-muted); margin-bottom: 15px; }
    .overlay-info button { margin-top: auto; }

    /* --- PROCESS --- */
    .process-steps {
      display: grid; gap: 30px; /* Increased gap */
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); /* Slightly larger min width */
    }
    .process-step { text-align: center; position: relative; padding-top: 40px; /* Space for number */ } /* Add padding top */
     .process-step::before { /* Decorative line before number */
         content: ''; position: absolute; top: 0; left: 50%; transform: translateX(-50%);
         width: 30px; height: 2px; background: var(--color-border);
     }

    .process-step h4 {
        font-size: 1.3rem; /* Larger title */
        color: var(--color-accent);
        margin-bottom: 15px;
        position: relative;
        padding-left: 0; /* Remove padding left */
        text-shadow: var(--hud-text-shadow);
    }
    .step-number {
      font-family: var(--font-heading); font-size: 2em; /* Larger number */
      color: var(--color-accent); /* Accent color */
      opacity: 0.7; /* Less opaque */
      position: absolute; top: 5px; /* Adjusted top */ left: 50%; transform: translateX(-50%); /* Center number */
      z-index: 1; /* Ensure number is above h4 if needed */
    }
     .process-step h4 .step-number { display: none; } /* Hide the number inside h4 if using pseudo-element */

    .process-step p { color: var(--color-muted); font-size: 0.9rem; line-height: 1.5; }

    /* --- BLOG --- */
    .blog-grid { display: grid; gap: 30px; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); }
    .blog-item h3 { font-size: 1.3rem; color: var(--color-accent); margin-bottom: 10px; text-shadow: var(--hud-text-shadow); }
    .blog-item p { color: var(--color-muted); line-height: 1.5; font-size: 0.9rem; margin-bottom: 15px; }
    .hud-link {
      color: var(--color-accent); text-decoration: none;
      border-bottom: 1px dashed var(--color-border); transition: color var(--transition-fast), border-color var(--transition-fast);
      padding-bottom: 2px;
    }
    .hud-link:hover { color: var(--color-text); border-color: var(--color-accent); }
    .hud-link.small { font-size: 0.8em; border: none; }
    .hud-link.social { font-size: 1.2rem; border: none; padding: 5px; }

    .blog-coming-soon {
      border: 1px dashed var(--color-border); padding: 30px; margin-top: 40px;
      text-align: center; color: var(--color-muted);
      background: rgba(var(--color-bg), 0.5); /* Add background */
      -webkit-backdrop-filter: blur(5px); /* Added prefix */
      backdrop-filter: blur(5px); /* Add blur */
    }
    .blog-coming-soon h3 { font-size: 1.5rem; color: var(--color-accent); margin-bottom: 15px; text-shadow: var(--hud-text-shadow); }

    /* --- TESTIMONIALS --- */
    .testimonials-carousel { max-width: 800px; margin: 0 auto; position: relative; padding: 30px; min-height: 200px; /* Increased min-height */}
    .testimonial {
      position: absolute; width: calc(100% - 60px); left: 30px; top: 30px;
      opacity: 0; transform: translateX(30px) scale(0.95);
      transition: opacity var(--transition-medium) ease, transform var(--transition-medium) ease;
      text-align: center;
    }
    .testimonial.active {
      opacity: 1; transform: translateX(0) scale(1);
      position: relative; left: 0; top: 0;
    }
    .testimonial p { font-size: 1.1rem; /* Larger text */ color: var(--color-text); margin-bottom: 20px; font-style: italic; }
    .testimonial cite { font-style: normal; font-weight: bold; color: var(--color-accent); display: block; margin-top: 15px; font-size: 1rem; /* Larger cite */ }
    .carousel-controls { margin-top: 30px; display: flex; justify-content: center; gap: 12px; position: absolute; bottom: -10px; left: 50%; transform: translateX(-50%); }
    .carousel-controls button {
      width: 12px; height: 12px; /* Larger buttons */ background: var(--color-border); border: none; border-radius: 50%; cursor: pointer; opacity: 0.6; transition: var(--transition-fast);
      outline: none;
    }
    .carousel-controls button.active { opacity: 1; background: var(--color-accent); transform: scale(1.3); box-shadow: var(--hud-glow); }
     .carousel-controls button:focus { outline: 1px dashed var(--color-text); }


    /* --- SERVICES --- */
    .services-grid { display: grid; gap: 30px; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); }
    .service-card { text-align: center; position: relative; overflow: hidden; padding-top: 35px; /* Space for tag */ } /* Add padding top */
    .service-card.featured { border-color: var(--color-accent); box-shadow: 0 0 20px var(--color-accent-glow); transform: scale(1.02); }
    .featured-tag {
      position: absolute; top: 0; right: -40px;
      background: var(--color-accent); color: var(--color-bg);
      padding: 5px 40px; font-size: 0.7rem; font-weight: bold; text-transform: uppercase;
      transform: rotate(45deg); transform-origin: top left; box-shadow: 0 2px 5px rgba(0,0,0,0.3);
      z-index: 1; /* Ensure tag is above content */
    }
    .service-card h4 { font-family: var(--font-heading); font-size: 1.8rem; /* Larger title */ color: var(--color-accent); margin-bottom: 15px; text-shadow: var(--hud-glow); }
    .service-card p { color: var(--color-muted); line-height: 1.5; margin-bottom: 15px; font-size: 0.95rem; } /* Slightly larger text */
    .service-card .price { font-size: 2rem; /* Larger price */ color: var(--color-accent); margin: 25px 0; font-family: var(--font-heading); text-shadow: var(--hud-text-shadow); }
    .service-card button { margin-top: 10px; }

    /* --- DOWNLOADS --- */
    .downloads-grid { display: grid; gap: 25px; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); }
    .download-item { text-align: center; }
    .download-item h4 { color: var(--color-accent); margin-bottom: 10px; font-size: 1.1rem; word-break: break-all; text-shadow: var(--hud-text-shadow); }
    .download-item p { color: var(--color-muted); font-size: 0.9rem; margin-bottom: 15px; }

    /* --- FAQs --- */
    .faqs-container { max-width: 900px; margin: 0 auto; }
    .faq-item {
      margin-bottom: 15px;
      border: 1px solid var(--color-border); border-radius: 5px;
      background: rgba(var(--color-glass-bg), 0.6); /* More opaque */
      overflow: hidden;
      transition: background var(--transition-fast), border-color var(--transition-fast);
    }
     .faq-item:hover {
         background: rgba(var(--color-glass-hover), 0.7);
         border-color: var(--color-accent);
     }
     /* [FAQ_PULSE] Pulso de Pregunta al Abrir - CSS Implementation */
     .faq-item.open {
         border-color: var(--color-accent);
         animation: faq-pulse 0.4s ease-out; /* Add pulse animation */
     }


    .faq-question {
      padding: 15px 40px 15px 15px; cursor: pointer;
      font-weight: bold; position: relative;
      color: var(--color-text);
      transition: color var(--transition-fast);
    }
    .faq-question:hover { color: var(--color-accent); }
    .faq-question::after {
      content: "+"; position: absolute; right: 15px; top: 50%;
      transform: translateY(-50%); font-size: 1.5rem;
      color: var(--color-accent); transition: transform var(--transition-medium) ease, color var(--transition-fast);
      font-family: var(--font-heading); /* Use heading font for +/- */
    }
     .faq-item:hover .faq-question::after { color: var(--color-text); }
    .faq-item.open .faq-question::after { transform: translateY(-50%) rotate(45deg); color: var(--color-text); }
    .faq-answer {
      padding: 0 15px; color: var(--color-muted); line-height: 1.6; font-size: 0.9rem;
      max-height: 0; overflow: hidden;
      transition: max-height var(--transition-medium) ease-out, padding var(--transition-medium) ease-out;
    }
    .faq-item.open .faq-answer {
      max-height: 500px; /* Increased max height */
      padding: 15px; border-top: 1px solid var(--color-border);
    }

    /* --- CONTACT --- */
    .contact-section { text-align: center; }
    .contact-section p { font-size: 1.1rem; color: var(--color-muted); margin-bottom: 30px; max-width: 600px; margin-left: auto; margin-right: auto; }
    .contact-section a.hud-button { margin-top: 0; } /* Adjust margin if needed */

    /* --- FOOTER --- */
    .main-footer {
      background: rgba(var(--color-bg), 0.8); /* Slightly more opaque */
      border-top: 1px solid var(--color-border);
      padding: 20px 5%; text-align: center;
      font-size: 0.85rem; color: var(--color-muted); /* Slightly larger font */
      position: relative; z-index: 5;
    }
    .main-footer p { margin-bottom: 10px; }
    .footer-links { margin-bottom: 10px; }
    .footer-links a { margin: 0 8px; }
    .social-links { display: flex; justify-content: center; gap: 20px; margin-top: 15px; /* More space */ }
     .social-links a {
         font-size: 1.3rem; /* Larger icons */
         color: var(--color-muted);
         transition: color var(--transition-fast), transform var(--transition-fast);
     }
     .social-links a:hover {
         color: var(--color-accent);
         transform: scale(1.2);
     }


    /* --- MODALS --- */
    .modal {
      display: none; position: fixed; z-index: 10002; left: 0; top: 0; width: 100%; height: 100%;
      background: rgba(0, 0, 0, 0.9); /* More opaque background */
      -webkit-backdrop-filter: blur(10px); /* Added prefix */
      backdrop-filter: blur(10px); /* Stronger blur */
      align-items: center; justify-content: center;
      pointer-events: none; /* Disabled initially */
    }
    .modal.open { display: flex; pointer-events: auto; /* Enabled when open */ }
    .modal-content {
      position: relative; padding: 30px; width: 90%; max-width: 700px; /* Wider modal */
      border-radius: 5px; animation: modal-fadein var(--transition-medium) ease forwards;
      background: var(--color-glass-bg); border: 1px solid var(--color-border);
      -webkit-backdrop-filter: blur(15px); /* Added prefix */
      backdrop-filter: blur(15px); /* Stronger blur */
      box-shadow: 0 8px 20px rgba(0,0,0,0.4), 0 0 15px var(--color-accent-glow); /* Stronger shadow */
    }
    @keyframes modal-fadein {
      from { opacity: 0; transform: scale(0.9); }
      to { opacity: 1; transform: scale(1); }
    }
    .close-modal {
      position: absolute; top: 15px; right: 20px; /* Adjusted position */
      font-size: 2.5rem; /* Larger close icon */
      color: var(--color-muted); cursor: pointer; transition: color var(--transition-fast); line-height: 1; z-index: 1;
    }
    .close-modal:hover { color: var(--color-feedback-error); } /* Red on hover */
    .modal-content h3 { color: var(--color-accent); margin-bottom: 15px; font-size: 1.5rem; text-shadow: var(--hud-text-shadow); }
    .modal-content p { color: var(--color-text); line-height: 1.6; margin-bottom: 10px; font-size: 0.95rem; }
    .modal-content p:last-of-type { margin-bottom: 0; }
    .modal-content a.hud-link { display: inline-block; margin-top: 15px; }

    /* --- REVEAL ANIMATION --- */
    .reveal {
      opacity: 0;
      transform: translateY(50px); /* Increased displacement */
      transition: opacity 1s cubic-bezier(0.645, 0.045, 0.355, 1),
                  transform 1s cubic-bezier(0.645, 0.045, 0.355, 1); /* Slower transition */
    }
    .reveal.visible {
      opacity: 1;
      transform: translateY(0);
    }


    /* ============================================================
       MICRO ANIMATIONS (CSS Keyframes & Styles)
       ------------------------------------------------------------
       Includes all new CSS-based micro-animations and styles for
       dynamically generated elements.
    ============================================================ */

     /* Keyframes moved from JS to CSS */
     @keyframes dot-fade-scale {
         0% { opacity: 0; transform: scale(0.5); }
         50% { opacity: 1; transform: scale(1); }
         100% { opacity: 0; transform: scale(0.8); }
     }
      @keyframes button-pulse {
          0% { transform: scale(1); box-shadow: none; }
          50% { transform: scale(1.05); box-shadow: var(--hud-glow); }
          100% { transform: scale(1); box-shadow: none; }
      }
       @keyframes beacon-pulse {
          0%, 100% { transform: scale(1); opacity: 1; }
          50% { transform: scale(1.1); opacity: 0.8; }
      }
       @keyframes cert-scan {
           0% { left: -100%; opacity: 1; }
           100% { left: 100%; opacity: 0; }
       }
       @keyframes faq-pulse {
           0% { box-shadow: none; }
           50% { box-shadow: 0 0 8px rgba(var(--color-accent-rgb), 0.5); }
           100% { box-shadow: none; }
       }
        @keyframes sparkle {
            0% { opacity: 0; transform: translateX(50%); }
            50% { opacity: 1; transform: translateX(0); }
            100% { opacity: 0; transform: translateX(-50%); }
        }
        @keyframes glitch-pixel-fade { /* Animation for SYSTEM_GLITCH_PIXELS */
            0%, 100% { opacity: 0.7; }
            50% { opacity: 0.1; }
        }

     /* Styles for JS-generated dynamic elements (dots, noise, streaks, etc.) */
     .hud-dynamic-bit.dot {
         width: var(--hud-dot-size);
         height: var(--hud-dot-size);
         border-radius: 50%; /* Circle */
     }
      .hud-dynamic-bit.noise {
          background-color: var(--hud-noise-color);
          width: 3px; /* Example size */
          height: 3px;
          border-radius: 0; /* Square */
      }
       .hud-dynamic-bit.streak {
           background-color: var(--hud-data-streak-color);
           width: 1px; /* Thin line */
           height: 5px; /* Example length */
           border-radius: 0;
           animation: data-streak-move 1s linear forwards; /* Animation for streaks */
       }
        @keyframes data-streak-move {
            0% { transform: translate(0, 0) rotate(0deg); opacity: 1; }
            100% { transform: translate(var(--move-x), var(--move-y)) rotate(var(--rotate)); opacity: 0; } /* --move-x, --move-y, --rotate set by JS */
        }
       .hud-dynamic-bit.glitch {
           width: 1px;
           height: 1px;
           background-color: var(--color-feedback-error); /* Red/Error color */
           opacity: 0.7;
           animation: glitch-pixel-fade 0.1s ease-out forwards; /* Very short animation */
       }
       /* Animation for Interaction Burst */
        .hud-dynamic-bit.burst {
           background-color: var(--color-accent); /* Accent color for burst */
           width: 2px; height: 2px; border-radius: 50%;
           animation: burst-out 0.5s ease-out forwards;
       }
        @keyframes burst-out {
           0% { transform: translate(0,0) scale(1); opacity: 1; }
           100% { transform: translate(var(--burst-x), var(--burst-y)) scale(0); opacity: 0; } /* --burst-x, --burst-y set by JS */
        }


    /* ============================================================
       MEDIA QUERIES
       ------------------------------------------------------------
    ============================================================ */
    @media (max-width: var(--tablet-break)) {
      html { font-size: 15px; }
      .hud-readout { font-size: 0.7rem; padding: 4px 8px; }
      .top-left-readout { top: 70px; left: 15px; }
      .top-right-readout { top: 70px; right: 15px; }
      .bottom-left-readout { bottom: 60px; left: 15px; }
      .bottom-right-readout { bottom: 60px; right: 15px; }
      .section-container { padding: 80px 4%; margin-top: 40px; padding-bottom: 40px; }
       .section-container:first-of-type { padding-top: 0;}
      .main-content-wrapper { padding-top: 80px; padding-bottom: 60px; }
      #mainHeader { padding: 10px 20px; }
       .section-title { margin-bottom: 40px; font-size: clamp(1.8rem, 4.5vw, 2.5rem); }
       .about-content { flex-direction: column; gap: 20px; }
       .about-image { min-width: 200px; flex: 1 1 auto; } /* Allow shrinking slightly */
       .skills-grid { grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 20px; }
       .skill-item img { width: 35px; height: 35px; margin-bottom: 10px; }
       .skill-item h3 { font-size: 0.9rem; margin-bottom: 5px;}
       .skill-level { font-size: 0.7rem; margin-top: 5px;}
        .progress-bar-container { height: 6px;}
        .progress-bar-container::after { top: -16px; font-size: 0.65rem; }
        .progress-fill::after { width: 8px; } /* Adjust sparkle size */


      .project-grid, .achievements-grid, .certifications-grid, .process-steps, .services-grid, .downloads-grid, .blog-grid {
          grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); /* Allow smaller items on tablet */
          gap: 25px;
      }
       .project-item p { font-size: 0.85rem; }
       .tech-tags span { font-size: 0.7rem; padding: 3px 6px; }
       .timeline-list { padding-left: 30px; gap: 20px; }
       .timeline-list::before { left: 10px; }
       .timeline-item { padding-left: 20px; padding: 15px; }
       .timeline-item::before { left: 6px; top: 18px; }
       .timeline-item:last-of-type::before { top: calc(100% - 10px); } /* Adjust */
       .achievement-item, .process-step, .service-card, .download-item, .blog-item, .faq-item { padding: 20px; }
       .process-step { padding-top: 35px; }
        .process-step::before { width: 25px; }
       .step-number { font-size: 1.8em; top: 3px; }
       .faqs-container { padding: 0;} /* Remove padding from container on mobile */
       .faq-question { padding: 12px 35px 12px 12px; }
       .faq-question::after { right: 10px; font-size: 1.3rem; }
       .faq-answer { padding: 12px; }
       .modal-content { max-width: 95%; padding: 25px; }
       .close-modal { font-size: 2rem; top: 10px; right: 15px; }

       /* Adjust corner scan for tablet */
       :root { --hud-scan-width: 8px; }

        /* Disable some intensive animations on tablet */
        .hud-dynamic-bit.noise, .hud-dynamic-bit.glitch { display: none; }
        .hud-line::before { animation: none; } /* Disable line streaks */
         .section-container.visible::before, .section-container.visible::after { animation-name: section-scan-in, none; } /* Disable texture scan */


    }

    @media (max-width: var(--mobile-break)) {
      html { font-size: 14px; }
      body { cursor: default; }
      .hud-corner { display: none; } /* Hide corners on mobile */
      .hud-line { display: none; } /* Hide lines on mobile */
      .hud-readout { display: none; } /* Hide readouts on mobile */
      .hud-dynamic-bit, .hud-dynamic-bit.dot, .hud-dynamic-bit.noise, .hud-dynamic-bit.streak, .hud-dynamic-bit.glitch, .hud-dynamic-bit.burst { display: none !important; } /* Hide ALL JS dynamic bits on mobile */


      .main-content-wrapper { padding-top: 70px; padding-bottom: 20px; }
      #mainHeader { padding: 8px 15px; }
      .branding a { font-size: 1.3rem; }
      .header-controls { gap: 5px; }
      #muteButton { padding: 6px; }
      .filter-panel {
        position: fixed; top:0; left:0;
        width:75vw; max-width:300px;
        transform: translateX(-100%); opacity:0;
        transition: transform .3s ease, opacity .2s ease;
      }
      .filter-panel.open {
        transform: translateX(0); opacity:1;
      }
      .hero { padding: 80px 5% 40px 5%; margin-top: -70px;}
      .hero h1 { font-size: clamp(2rem, 7vw, 4rem); letter-spacing: 0.02em; margin-bottom: 15px; }
      .hero p { font-size: clamp(0.9rem, 2vw, 1.1rem); }
      .scroll-down-indicator { bottom: 10px; font-size: 1.2rem; }
      .section-container { padding: 40px 5%; margin-top: 30px; padding-bottom: 30px; }
       .section-container:first-of-type { padding-top: 0;}
       /* Hide section scan on mobile */
       .section-container::before, .section-container::after { display: none; }
      .section-title { margin-bottom: 30px; font-size: clamp(1.5rem, 5vw, 2rem); }
      .about-content { gap: 15px; }
      .about-text { min-width: auto; }
      .about-image { max-width: 200px; }
      .skills-grid { grid-template-columns: repeat(auto-fit, minmax(100px, 1fr)); gap: 10px; }
      .skill-item img { width: 35px; height: 35px; margin-bottom: 10px; }
      .skill-item h3 { font-size: 0.9rem; margin-bottom: 5px;}
      .skill-level { font-size: 0.7rem; margin-top: 5px;}
       .progress-bar-container { height: 6px;}
       .progress-bar-container::after { top: -16px; font-size: 0.65rem; }
       .progress-fill::after { animation: none; display: none; } /* Disable sparkle animation */


      .project-grid, .achievements-grid, .certifications-grid, .process-steps, .services-grid, .downloads-grid, .blog-grid {
          grid-template-columns: 1fr;
          gap: 20px;
      }
       .project-item p { font-size: 0.85rem; }
       .tech-tags span { font-size: 0.7rem; padding: 3px 6px; }
       .timeline-list { padding-left: 25px; gap: 15px; }
       .timeline-list::before { left: 8px; }
       .timeline-item { padding-left: 15px; padding: 10px; }
       .timeline-item::before { left: 5px; top: 15px; width: 8px; height: 8px; }
        .timeline-item:first-of-type::before { top: 12px; } /* Adjust first item dot */
        .timeline-item:last-of-type::before { top: calc(100% - 10px); } /* Adjust last item dot */
       /* Hide timeline beacon animation on mobile for performance */
       .timeline-item.active-beacon::before { animation: none; box-shadow: 0 0 5px var(--color-accent-glow); }


       .timeline-year { font-size: 1.2em; }
       .achievement-icon { font-size: 2.5rem; margin-bottom: 10px; }
       .achievement-item h4 { font-size: 1.1rem; margin-bottom: 8px;}
       .certification-image { height: 150px; }
        .overlay-info h3 { font-size: 1.1rem; }
        .overlay-info p { font-size: 0.8rem; }
        /* Hide certificate scan on mobile */
        .certification-item::before { display: none; }
       .process-step { padding-top: 30px; }
        .process-step::before { width: 20px; top: -5px;} /* Adjusted position to be above element */
        .step-number { font-size: 1.5em; top: -20px; } /* Position relative to the element top */
       .process-step h4 { font-size: 1.1rem; margin-bottom: 10px;}
       .blog-item h3 { font-size: 1.1rem; }
       .blog-item p { font-size: 0.85rem; }
       .blog-coming-soon { padding: 20px; }
       .blog-coming-soon h3 { font-size: 1.3rem; }
        .testimonials-carousel { min-height: 150px; padding: 20px;}
        .testimonial p { font-size: 1rem; margin-bottom: 15px;}
        .testimonial cite { font-size: 0.85rem; margin-top: 10px;}
        .carousel-controls { gap: 8px; bottom: -5px; }
        .carousel-controls button { width: 8px; height: 8px; }
        .service-card h4 { font-size: 1.6rem; }
        .service-card p { font-size: 0.9rem;}
        .service-card .price { font-size: 1.8rem; margin: 20px 0;}
        .download-item h4 { font-size: 1rem;}
        .download-item p { font-size: 0.8rem;}
        .faq-item { margin-bottom: 10px; }
        .faq-question { padding: 10px 30px 10px 10px; font-size: 0.9rem; }
        .faq-question::after { right: 8px; font-size: 1.2rem; }
        .faq-answer { padding: 10px; font-size: 0.85rem;}
       /* Hide FAQ pulse animation on mobile */
       .faq-item.open { animation: none; box-shadow: none; }
        contact-section p { font-size: 1rem; margin-bottom: 20px;}
        .main-footer { padding: 15px 5%; font-size: 0.8rem; }
        .social-links { gap: 10px; margin-top: 10px;}
        .social-links a { font-size: 1.1rem; }
        .modal-content { padding: 20px; }
        .modal-content h3 { font-size: 1.3rem; margin-bottom: 10px;}
        .modal-content p { font-size: 0.9rem; }
    }

    body::before {
      content:'';
      position:fixed; inset:0;
      pointer-events:none;
      z-index:-1; /* justo encima del fondo */
      background-image:
        linear-gradient(rgba(var(--color-accent-rgb),0.05) 1px, transparent 1px),
        linear-gradient(to right, rgba(var(--color-accent-rgb),0.05) 1px, transparent 1px);
      background-size: 50px 50px;
      animation: grid-shift 60s linear infinite;
    }
    @keyframes grid-shift {
      0%   { background-position: 0   0; }
      100% { background-position: 100px 100px; }
    }
    @media (prefers-reduced-motion: reduce) {
      body::before { animation: none; }
    }

    /* Track */
    ::-webkit-scrollbar {
      width: 8px;
      background: rgba(var(--color-bg),0.3);
    }
    /* Thumb */
    ::-webkit-scrollbar-thumb {
      background: var(--color-accent);
      border-radius: 4px;
      box-shadow: 0 0 5px var(--color-accent-glow);
    }
    /* Hover */
    ::-webkit-scrollbar-thumb:hover {
      background: var(--color-accent-dark);
    }
    /* Scrollbar */
    ::-webkit-scrollbar {
      scrollbar-color: var(--color-accent) rgba(var(--color-bg),0.3);
      scrollbar-width: thin;
    }

    /* ESTILOS PARA LISTA DE DATOS DE CERTIFICADOS */
    .cert-data-list {
      list-style: none;
      margin: 0;
      padding: 0;
      font-family: var(--font-main);
    }
    .cert-list-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 15px;
      border-bottom: 1px solid var(--color-border);
      transition: background var(--transition-fast), color var(--transition-fast);
      position: relative;
    }
    .cert-list-item .cert-name {
      font-family: var(--font-heading);
      color: var(--color-accent);
      margin-right: 10px;
    }
    .cert-list-item span {
      margin-right: 10px;
    }
    .cert-list-item .cert-status {
      font-weight: bold;
    }
    .cert-list-item:hover {
      background: rgba(var(--color-accent-rgb), 0.1);
      color: var(--color-accent);
    }
    .cert-list-item:hover::before {
      content: '>';
      position: absolute;
      left: 5px;
      color: var(--color-accent);
    }

    /* Split layout y panel de estadísticas en About */
    #about .about-content {
      display: grid;
      grid-template-columns: 2fr 1fr 1fr;
      gap: 30px;
      align-items: start;
    }
    @media (max-width: var(--tablet-break)) {
      #about .about-content {
        display: flex;
        flex-direction: column;
      }
    }
    .about-stats {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    .about-stats h3 {
      font-family: var(--font-heading);
      font-size: 1.2rem;
      color: var(--color-accent);
      text-shadow: var(--hud-text-shadow);
      margin-bottom: 8px;
    }
    .about-stats .stat-item {
      display: flex;
      justify-content: space-between;
      padding: 4px 0;
      font-family: var(--font-main);
      font-size: 0.9rem;
      color: var(--color-text);
      border-bottom: 1px solid var(--color-border);
    }
    .about-stats .stat-item:last-child {
      border-bottom: none;
    }

    /* Overlays temáticos para la imagen */
    .about-image {
      position: relative;
      overflow: hidden;
    }
    .about-image::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 50%;
      height: 100%;
      background: linear-gradient(to right, transparent, rgba(var(--color-accent-rgb), 0.3) 50%, transparent);
      transform: skewX(-25deg);
      opacity: 0;
      pointer-events: none;
    }
    .about.visible .about-image::before,
    .about-image:hover::before {
      animation: profile-image-scan 0.8s linear forwards;
    }
    @keyframes profile-image-scan {
      0%   { left: -100%; opacity: 0; }
      10%  { opacity: 0.5; }
      100% { left: 100%; opacity: 0; }
    }
    .about-image::after {
      content: '';
      position: absolute;
      inset: 0;
      border: 1px dashed var(--color-accent);
      pointer-events: none;
      box-shadow: var(--hud-glow);
    }

    /* HEADER MODULE LAYOUT */
    @media (max-width: var(--mobile-break)) {
      #mainHeader {
        flex-direction: column;
        align-items: flex-start;
        padding: 8px 15px;
      }
      #mainHeader .branding {
        margin-bottom: 8px;
      }
      #mainHeader .header-modules-right {
        width: 100%;
        justify-content: space-between;
        flex-wrap: wrap;
        gap: 8px;
      }
      /* Ajuste de tamaño de fuente y paddings para móvil */
      .sys-status-module,
      .system-clock-module,
      .header-controls .hud-button {
        font-size: 0.7rem;
        padding: 4px 6px;
      }
    }

    .nav-log-feed {
      position: fixed;
      bottom: 20px;
      left: 20px;
      max-width: 300px;
      max-height: 150px;
      overflow: hidden;
      font-family: var(--font-main);
      font-size: 0.7rem;
      color: var(--color-muted);
      background: rgba(var(--color-bg),0.85);
      border: 1px solid var(--color-border);
      border-radius: 4px;
      padding: 8px;
      backdrop-filter: blur(4px);
      z-index: 10002;
    }
    /* HEADER EXPANDED CONTROLS (MOBILE) */
    .header-expanded-controls {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%;
      background: rgba(var(--color-bg),0.9);
      backdrop-filter: blur(10px);
      flex-direction: column;
      padding: 10px;
      gap: 8px;
      z-index: 1001;
    }
    .header-expanded-controls.open {
      display: flex;
    }

    /* Scroll performance hints */
    .reveal,
    .hud-overlay,
    #mainHeader,
    .modal-content,
    .filter-panel {
        will-change: transform, opacity, filter;
    }

    #cursorTrail,
    #skillsVis,
    #scrollCanvas {
        will-change: contents;
    }

    /* Scroll streaming visual effect canvas */
    #scrollCanvas {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 1002;
        opacity: 0;
        transition: opacity 0.3s ease;
    }
  </style>

</head>
<body>
<canvas id="scrollCanvas"></canvas>

  <!-- ============================================================
       ADVANCED LOADER
       ------------------------------------------------------------
       New HUD design, scanline, dynamic text.
  ============================================================ -->
  <div class="loader-overlay active" id="loaderOverlay">
    <div class="loader-hud-border"></div>
    <div class="loader-scanline"></div>
    <div class="loader-content">
      <div class="loader-logo">[ LOGO_INIT ]</div>
      <div class="loader-text" id="loaderText"></div>
      <div class="loader-bar-container">
        <div class="loader-bar" id="loaderBar"></div>
      </div>
      <div class="loader-percentage" id="loaderPercentage">0%</div>
      <div class="loader-subtext" id="loaderSubtext"></div>
    </div>
  </div>

  <!-- ============================================================
       HUD OVERLAY ELEMENTS
       ------------------------------------------------------------
       Fixed visual layers for interface feel. Includes containers
       for random dots animation.
  ============================================================ -->
  <div class="hud-overlay">
    <!-- Decorative Corners -->
    <div class="hud-corner top-left"></div>
    <div class="hud-corner top-right"></div>
    <div class="hud-corner bottom-left"></div>
    <div class="hud-corner bottom-right"></div>

    <!-- Decorative Lines -->
    <div class="hud-line top"></div>
    <div class="hud-line bottom"></div>
    <div class="hud-line left"></div>
    <div class="hud-line right"></div>

    <!-- Info Readouts (Examples) -->
    <div class="hud-readout bottom-left-readout">
      <span>UID:</span> INMORTAL _v2.5
    </div>
    <div class="hud-readout bottom-right-readout" id="hudScrollIndicator">
      <span>SCROLL:</span> 0%
    </div>
  </div>

  <!-- ============================================================
       MAIN CONTENT WRAPPER
       ------------------------------------------------------------
       All portfolio content goes inside this wrapper.
  ============================================================ -->
  <div class="main-content-wrapper" id="mainContent">

    <!-- Header Control Panel -->
    <header id="mainHeader">
      <div class="branding">
        <a href="#">[ SYS_LOGO ]</a>
      </div>
      <div class="header-modules-right">
        <div class="sys-status-module"><span>SYS_STATUS:</span> <span class="hud-ok">ONLINE</span></div>
        <div class="system-clock-module" id="hudClock">--:--:--</div>
        <div class="header-controls">
          <button class="hud-button" id="muteButton" aria-label="Silenciar Sonidos">
            <i class="fas fa-volume-up"></i><i class="fas fa-volume-mute mute-slash"></i>
          </button>
          <button class="hud-button theme-toggle" id="themeToggle" aria-label="Cambiar Tema">LGT</button>
          <button class="hud-button lang-toggle" id="langToggle" aria-label="Cambiar Idioma">EN</button>
          <div class="filter-container">
            <button class="hud-button filter-btn" id="filter-btn" aria-label="Abrir menú de filtros">NAV_MENU</button>
          </div>
        </div>
      </div>
    </header>

     <!-- Filter Panel (Centered Overlay) -->
    <div class="filter-panel" id="filter-panel">
        <!-- Menu content (as before) -->
        <ul class="navbar-nav">
           <li><a class="nav-link" href="#hero">Inicio</a></li>
           <li><a class="nav-link" href="#about">Sobre Mí</a></li>
           <li><a class="nav-link" href="#skills">Habilidades</a></li>
           <li><a class="nav-link" href="#proyectos">Proyectos</a></li>
           <li><a class="nav-link" href="#timeline">Cronología</a></li>
           <li><a class="nav-link" href="#achievements">Logros</a></li>
           <li><a class="nav-link" href="#certificados">Certificados</a></li>
           <li><a class="nav-link" href="#process">Proceso</a></li>
           <li><a class="nav-link" href="#blog">Blog</a></li>
           <li><a class="nav-link" href="Evidencias/Menu.html">Evidencias</a></li>
        </ul>
      </div>

    <!-- Overlay for filter menu -->
    <div class="filter-overlay" id="filterOverlay"></div>

    <!-- Video Background -->
    <video autoplay muted loop playsinline id="bg-video">
        <source src="MP4/black.mp4" type="video/mp4"> <!-- CHANGE THIS PATH -->
        Your browser does not support videos.
    </video>

    <!-- Particles Container -->
    <div id="particles-js"></div>


    <!-- ============================================================
         PORTFOLIO SECTIONS (Enhanced Visual Details)
         ------------------------------------------------------------
    ============================================================ -->

    <!-- HERO -->
    <section class="hero section-container reveal" id="hero">
      <h1 data-text="PORTAFOLIO DE INMORTAL" id="heroTitle" class="glitch-text">PORTAFOLIO DE INMORTAL</h1>
      <p id="heroSubtitle">
        Creando experiencias digitales imposibles, fusionando estética, tecnología
        y efectos glitch que desafían la lógica, con auroras danzantes y partículas interactivas.
      </p>
      <a href="#about" class="scroll-down-indicator" aria-label="Ir a Sobre Mí">▼</a>
    </section>

    <!-- ABOUT -->
    <section class="about section-container reveal" id="about">
      <h2 class="section-title glitch-text" data-text="Sobre Mí /// User_Profile">Sobre Mí /// User_Profile</h2>
      <div class="about-content">
        <div class="about-text content-box" id="aboutText">
          <p>
            Soy un desarrollador apasionado por la creación de experiencias digitales
            innovadoras. Con una sólida formación en diseño y programación, me especializo
            en fusionar estética y funcionalidad para ofrecer soluciones que no solo son
            visualmente atractivas sino también altamente eficientes.
          </p>
          <p>
            Mi enfoque se centra en entender las necesidades de mis clientes y usuarios
            para desarrollar proyectos que superen sus expectativas. Siempre busco estar
            al día con las últimas tendencias y tecnologías para asegurar que cada proyecto
            sea relevante y de vanguardia.
          </p>
        </div>
        <div class="about-image content-box">
          <img
            data-src="IMG/ID/1.jpg"
            src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"
            alt="Sobre Mí"
            loading="lazy"
            id="aboutImage"
          >
          <div class="image-hud-overlay">ID_SCAN: ARMANDO</div>
        </div>
        <div class="about-stats content-box" id="aboutStats">
          <h3>Perfil del Sistema</h3>
          <div class="stat-item"><span>UID:</span><span>INMORTAL_v2.5</span></div>
          <div class="stat-item"><span>SISTEMA:</span><span class="hud-ok">ONLINE</span></div>
          <div class="stat-item"><span>Carga Actual:</span><span>45%</span></div>
          <div class="progress-bar-container" data-label="45"><div class="progress-bar-fill" data-skill-level="45"></div></div>
          <div class="stat-item"><span>Componentes Verificados:</span></div>
          <div class="tech-tags"><span>HTML5</span><span>CSS3</span><span>JS</span><span>React</span></div>
        </div>
      </div>
    </section>

    <!-- SKILLS -->
    <section class="skills section-container reveal" id="skills" style="position: relative;">
      <canvas id="skillsVis" style="position:absolute; top:0; left:0; width:100%; height:100%; pointer-events:none; z-index:1; opacity:0.1;"></canvas>
      <h2 class="section-title glitch-text" data-text="Habilidades /// Skill_Matrix">Habilidades /// Skill_Matrix</h2>
      <div class="skills-grid" style="position: relative; z-index:2;">
        <div class="skill-item content-box">
          <img data-src="IMG/HABILIDADES/html-5.png" src="IMG/HABILIDADES/html-5.png" alt="HTML5" loading="lazy">
          <h3>HTML5</h3>
          <div class="progress-bar-container" data-label="90"><div class="progress-bar-fill" data-skill-level="90"></div></div>
          <div class="skill-level">Nivel: Experto // 90%</div>
        </div>
        <div class="skill-item content-box">
          <img data-src="IMG/HABILIDADES/css-3.png" src="IMG/HABILIDADES/css-3.png" alt="CSS3" loading="lazy">
          <h3>CSS3</h3>
          <div class="progress-bar-container" data-label="85"><div class="progress-bar-fill" data-skill-level="85"></div></div>
          <div class="skill-level">Nivel: Avanzado // 85%</div>
        </div>
         <div class="skill-item content-box">
          <img data-src="IMG/HABILIDADES/js.png" src="IMG/HABILIDADES/js.png" alt="JavaScript" loading="lazy">
          <h3>JavaScript</h3>
          <div class="progress-bar-container" data-label="80"><div class="progress-bar-fill" data-skill-level="80"></div></div>
          <div class="skill-level">Nivel: Avanzado // 80%</div>
        </div>
        <div class="skill-item content-box">
          <img data-src="IMG/HABILIDADES/REACT.png" src="IMG/HABILIDADES/REACT.png" alt="React" loading="lazy">
          <h3>React</h3>
          <div class="progress-bar-container" data-label="75"><div class="progress-bar-fill" data-skill-level="75"></div></div>
          <div class="skill-level">Nivel: Intermedio // 75%</div>
        </div>
        <div class="skill-item content-box">
          <img data-src="IMG/HABILIDADES/NODE.png" src="IMG/HABILIDADES/NODE.png" alt="Node.js" loading="lazy">
          <h3>Node.js</h3>
          <div class="progress-bar-container" data-label="70"><div class="progress-bar-fill" data-skill-level="70"></div></div>
          <div class="skill-level">Nivel: Intermedio // 70%</div>
        </div>
        <div class="skill-item content-box">
          <img data-src="IMG/HABILIDADES/piyton.png" src="IMG/HABILIDADES/piyton.png" alt="Python" loading="lazy">
          <h3>Python</h3>
          <div class="progress-bar-container" data-label="60"><div class="progress-bar-fill" data-skill-level="60"></div></div>
          <div class="skill-level">Nivel: En Progreso // 60%</div>
        </div>
        <div class="skill-item content-box">
          <img data-src="IMG/HABILIDADES/git.png" src="IMG/HABILIDADES/git.png" alt="Git" loading="lazy">
          <h3>Git</h3>
          <div class="progress-bar-container" data-label="90"><div class="progress-bar-fill" data-skill-level="90"></div></div>
          <div class="skill-level">Nivel: Experto // 90%</div>
        </div>
        <div class="skill-item content-box">
          <img data-src="IMG/HABILIDADES/ui-ux-.jpg" src="IMG/HABILIDADES/ui-ux-.jpg" alt="UI/UX" loading="lazy">
          <h3>UI/UX</h3>
          <div class="progress-bar-container" data-label="80"><div class="progress-bar-fill" data-skill-level="80"></div></div>
          <div class="skill-level">Nivel: Avanzado // 80%</div>
        </div>
      </div>
    </section>

    <!-- PROYECTOS -->
    <section class="projects section-container reveal" id="proyectos">
      <h2 class="section-title glitch-text" data-text="Proyectos Destacados /// Portfolio_Data">Proyectos Destacados /// Portfolio_Data</h2>
      <div class="internal-search content-box">
        <input type="text" id="searchProjectInput" placeholder="Filtrar proyectos por nombre/descripción..." />
        <button id="searchProjectBtn" class="hud-button small">Buscar</button>
      </div>
      <div class="project-grid" id="projectGrid">
        <div class="project-item content-box">
          <h3>Proyecto A</h3>
          <video controls muted preload="metadata" poster="IMG/posterA.png">
            <source src="MP4/Proyectos/P-1.mp4" type="video/mp4">
          </video>
          <p>Este menú está diseñado para ofrecer una experiencia segura y amigable.</p>
           <div class="tech-tags"><span>HTML</span><span>CSS</span><span>JS</span></div>
        </div>
        <div class="project-item content-box">
           <h3>Proyecto B</h3>
           <video controls muted preload="metadata" poster="IMG/posterB.png">
               <source src="MP4/Proyectos/P-2.mp4" type="video/mp4">
           </video>
           <p>Una experiencia única con nuestra interfaz esférica intuitiva y dinámica.</p>
           <div class="tech-tags"><span>Three.js</span><span>WebGL</span><span>UI</span></div>
        </div>
        <div class="project-item content-box">
            <h3>Proyecto C</h3>
            <video controls muted preload="metadata" poster="IMG/posterC.png">
               <source src="MP4/Proyectos/P-3.mp4" type="video/mp4">
           </video>
            <p>Landing page con tipografía deformable y espectros cromáticos, impulsada por IA.</p>
            <div class="tech-tags"><span>AI</span><span>JS</span><span>Canvas</span><span>Creative Coding</span></div>
        </div>
      </div>
    </section>

    <!-- TIMELINE -->
    <section class="timeline section-container reveal" id="timeline">
      <h2 class="section-title glitch-text" data-text="Cronología /// Career_Log">Cronología /// Career_Log</h2>
      <div class="timeline-list">
         <div class="timeline-item content-box">
             <h4><span class="timeline-year">2020</span> /// Genesis_Phase</h4>
             <p>Comencé mi formación en desarrollo web, aprendiendo lo básico de HTML, CSS y JavaScript. Primeros pasos en la matriz digital.</p>
         </div>
         <div class="timeline-item content-box">
             <h4><span class="timeline-year">2021</span> /// Alpha_Builds</h4>
             <p>Trabajé en proyectos personales y prácticas profesionales. Participé en hackathons y gané experiencia en equipos ágiles. Compilando experiencia.</p>
         </div>
         <div class="timeline-item content-box">
             <h4><span class="timeline-year">2022</span> /// Core_Specialization</h4>
             <p>Me enfoqué en React y Node.js, creando aplicaciones fullstack. Desarrollé varias páginas web para clientes locales. Interfaces optimizadas.</p>
         </div>
          <div class="timeline-item content-box">
             <h4><span class="timeline-year">2023</span> /// Aesthetic_Fusion</h4>
             <p>Descubrí mi pasión por el diseño futurista y el uso creativo de animaciones y efectos glitch en proyectos web. Integración de estilos cyberglow.</p>
         </div>
          <div class="timeline-item content-box">
             <h4><span class="timeline-year">2024-PRESENTE</span> /// Quantum_Leap</h4>
             <p>Sigo evolucionando mis habilidades y explorando nuevas tecnologías, incluyendo IA, Web3 y visualización de datos avanzada. Expandiendo horizonte de eventos.</p>
         </div>
      </div>
    </section>

    <!-- ACHIEVEMENTS -->
    <section class="achievements section-container reveal" id="achievements">
      <h2 class="section-title glitch-text" data-text="Reconocimientos y Logros /// Accolade_Registry">Reconocimientos y Logros /// Accolade_Registry</h2>
      <div class="achievements-grid">
         <div class="achievement-item content-box">
             <div class="achievement-icon">🏆</div>
             <h4>Hackathon Futurista 2022</h4>
             <p>Ganador del primer lugar en la categoría de Mejor Diseño Interactivo. [Code: HF2022_WIN]</p>
         </div>
         <div class="achievement-item content-box">
             <div class="achievement-icon">✅</div>
             <h4>Certificación React Avanzado</h4>
             <p>Expedido por Platzi, demostrando dominio de la librería. [CertID: PLZ_RCT_ADV]</p>
         </div>
          <div class="achievement-item content-box">
             <div class="achievement-icon">📜</div>
             <h4>Diploma en UX/UI Design</h4>
             <p>Formación completa en experiencia de usuario y diseño de interfaces. [CertID: UXUI_DPL]</p>
         </div>
          <div class="achievement-item content-box">
             <div class="achievement-icon">⭐</div>
             <h4>Mención Honorífica - Tesis</h4>
             <p>Por Universidad XYZ, reconociendo proyecto sobre accesibilidad web. [Ref: UNIVXYZ_ACC_TH]</p>
         </div>
      </div>
    </section>

    <!-- CERTIFICATES -->
    <section class="certificados section-container reveal" id="certificados">
      <h2 class="section-title glitch-text" data-text="Certificados Digitales /// Credential_Vault">Certificados Digitales /// Credential_Vault</h2>
      <ul class="cert-data-list content-box">
         <li class="cert-list-item" data-modal-id="modal-cert1">
             <span class="cert-name">[IBM] Web Dev Foundations</span>
             <span class="cert-issuer">IBM</span>
             <span class="cert-date">2025-03-05</span>
             <span class="cert-status hud-ok">[VERIFIED]</span>
             <button class="hud-button small modal-trigger" data-modal-id="modal-cert1">[VER]</button>
         </li>
         <li class="cert-list-item" data-modal-id="modal-cert2">
             <span class="cert-name">[IBM] Generative AI Dev</span>
             <span class="cert-issuer">IBM</span>
             <span class="cert-date">2025-04-10</span>
             <span class="cert-status hud-ok">[VERIFIED]</span>
             <button class="hud-button small modal-trigger" data-modal-id="modal-cert2">[VER]</button>
         </li>
          <li class="cert-list-item" data-modal-id="modal-cert3">
             <span class="cert-name">[IBM] Git & GitHub Mastery</span>
             <span class="cert-issuer">IBM</span>
             <span class="cert-date">2025-04-15</span>
             <span class="cert-status hud-ok">[VERIFIED]</span>
             <button class="hud-button small modal-trigger" data-modal-id="modal-cert3">[VER]</button>
         </li>
          <li class="cert-list-item" data-modal-id="modal-cert4">
             <span class="cert-name">[Google] Cybersecurity Foundations</span>
             <span class="cert-issuer">Google</span>
             <span class="cert-date">2025-03-28</span>
             <span class="cert-status hud-ok">[VERIFIED]</span>
             <button class="hud-button small modal-trigger" data-modal-id="modal-cert4">[VER]</button>
         </li>
      </ul>
    </section>

    <!-- PROCESS -->
    <section class="process section-container reveal" id="process">
      <h2 class="section-title glitch-text" data-text="Proceso de Trabajo /// Workflow_Protocol">Proceso de Trabajo /// Workflow_Protocol</h2>
      <div class="process-steps">
         <div class="process-step content-box">
            <div class="step-number">01</div>
            <h4>Análisis</h4>
            <p>Comprensión profunda de requerimientos, investigación de mercado y alineación estratégica con el cliente. Estableciendo vector inicial.</p>
         </div>
          <div class="process-step content-box">
             <div class="step-number">02</div>
            <h4>Diseño</h4>
            <p>Creación de wireframes, mockups interactivos y prototipos funcionales. Priorizando UX/UI óptima y estética definida. Arquitectura visual.</p>
         </div>
          <div class="process-step content-box">
             <div class="step-number">03</div>
            <h4>Desarrollo</h4>
            <p>Implementación con tecnologías adecuadas, código limpio y eficiente, siguiendo buenas prácticas y seguridad. Fase de compilación.</p>
         </div>
         <div class="process-step content-box">
            <div class="step-number">04</div>
            <h4>Pruebas</h4>
            <p>QA exhaustiva, depuración de errores, optimización de rendimiento y pruebas de compatibilidad cross-browser/device. Protocolo de validación.</p>
         </div>
          <div class="process-step content-box">
             <div class="step-number">05</div>
            <h4>Entrega</h4>
            <p>Despliegue controlado, entrega de documentación completa y soporte post-lanzamiento para estabilidad y éxito continuo. Misión completada.</p>
         </div>
      </div>
    </section>

    <!-- BLOG -->
     <section class="blog section-container reveal" id="blog">
       <h2 class="section-title glitch-text" data-text="Blog /// Knowledge_Base">Blog /// Knowledge_Base</h2>
       <div class="blog-grid" id="blogGrid">
           <div class="blog-item content-box">
               <h3>Cómo Empezar con React</h3>
               <p>React: Biblioteca JS para UIs. Exploramos fundamentos para tu primer proyecto. [Entry: React_Basics]</p>
               <a href="Blog/React.html" class="hud-link">Leer Transmisión &gt;</a>
           </div>
           <div class="blog-item content-box">
               <h3>Optimización SEO 2024</h3>
               <p>SEO: Clave para visibilidad web. Descubre best practices y estrategias para optimizar contenido. [Entry: SEO_2024]</p>
               <a href="Blog/Ceo.html" class="hud-link">Leer Transmisión &gt;</a>
           </div>
           <div class="blog-item content-box">
               <h3>Diseño Responsivo: Claves</h3>
               <p>Responsive Design: Asegura visualización óptima en cualquier dispositivo. Técnicas esenciales. [Entry: Responsive_Keys]</p>
               <a href="Blog/Diseño.html" class="hud-link">Leer Transmisión &gt;</a>
           </div>
           <div class="blog-item content-box">
               <h3>Introducción a la IA</h3>
               <p>Inteligencia Artificial: Transformando industrias. Intro a conceptos básicos y aplicaciones. [Entry: AI_Intro]</p>
               <a href="Blog/IA.html" class="hud-link">Leer Transmisión &gt;</a>
           </div>
       </div>
       <div class="blog-coming-soon content-box">
           <h3>[ Próximas Entradas // Standby ]</h3>
           <p>Procesando nuevo contenido... Mantente conectado para futuras transmisiones sobre desarrollo web, diseño avanzado, IA y más allá.</p>
       </div>
     </section>

    <!-- TESTIMONIALS -->
    <section class="testimonials section-container reveal" id="testimonials">
       <h2 class="section-title glitch-text" data-text="Testimonios /// Client_Feedback_Log" id="testimonialsTitle">Testimonios /// Client_Feedback_Log</h2>
       <div class="testimonials-carousel content-box">
           <div class="testimonial active">
               <p>"Increíble trabajo, el resultado superó todas mis expectativas. La interfaz es de otro mundo."</p>
               <cite>— Juan Pérez [Ref: JP_Feedback]</cite>
           </div>
           <div class="testimonial">
               <p>"Profesional, creativo y fácil de colaborar. Una visión verdaderamente futurista aplicada con maestría."</p>
               <cite>— María López [Ref: ML_Feedback]</cite>
           </div>
           <div class="testimonial">
               <p>"El diseño y las animaciones elevaron nuestro producto a un nivel completamente nuevo. Impacto inmediato."</p>
               <cite>— Carlos Gómez [Ref: CG_Feedback]</cite>
           </div>
           <div class="carousel-controls">
               <button class="active" aria-label="Mostrar Testimonio 1"></button>
               <button aria-label="Mostrar Testimonio 2"></button>
               <button aria-label="Mostrar Testimonio 3"></button>
           </div>
       </div>
    </section>

    <!-- SERVICES -->
    <section class="services section-container reveal" id="services">
        <h2 class="section-title glitch-text" data-text="Servicios /// Service_Matrix">Servicios /// Service_Matrix</h2>
        <div class="services-grid">
            <div class="service-card content-box">
                <h4>Plan [CORE]</h4>
                <p>Ideal para proyectos personales o prototipos de pequeña escala. Presencia digital esencial.</p>
                <p class="price">$49 // Ciclo Mensual</p>
                <button class="hud-button">Iniciar Protocolo</button>
            </div>
            <div class="service-card content-box featured">
                 <div class="featured-tag">RECOMENDADO</div>
                 <h4>Plan [NEXUS]</h4>
                 <p>Perfecto para startups o negocios en crecimiento. Funcionalidad y diseño avanzados.</p>
                 <p class="price">$99 // Ciclo Mensual</p>
                 <button class="hud-button primary">Activar Nexus</button>
            </div>
            <div class="service-card content-box">
                 <h4>Plan [AEGIS]</h4>
                 <p>Solución robusta para grandes compañías y proyectos complejos. Soporte y escalabilidad premium.</p>
                 <p class="price">$199 // Ciclo Mensual</p>
                 <button class="hud-button">Desplegar Aegis</button>
            </div>
        </div>
    </section>

    <!-- DOWNLOADS -->
    <section class="downloads section-container reveal" id="downloads">
        <h2 class="section-title glitch-text" data-text="Descargas /// Data_Repository">Descargas /// Data_Repository</h2>
        <div class="downloads-grid">
            <div class="download-item content-box">
                <h4>CV_JAEspinosa_v2.5.pdf</h4>
                <p>Currículum Vitae actualizado. Formato seguro PDF.</p>
                <button class="hud-button small download-trigger" data-file="src/pdf/CV-ESPINOSA.pdf">Descargar Archivo</button>
            </div>
            <div class="download-item content-box">
                <h4>BestPractices_Guide_v1.pdf</h4>
                <p>Guía de buenas prácticas en código y diseño responsive.</p>
                <button class="hud-button small download-trigger" data-file="files/GuiaBuenasPracticas.pdf">Descargar Archivo</button>
            </div>
            <div class="download-item content-box">
                <h4>JS_Snippets_Collection.pdf</h4>
                <p>Recopilación de snippets útiles de JavaScript para desarrollo web.</p>
                <button class="hud-button small download-trigger" data-file="files/JS-Tips.pdf">Descargar Archivo</button>
            </div>
        </div>
    </section>

    <!-- FAQs -->
    <section class="faqs section-container reveal" id="faqs">
       <h2 class="section-title glitch-text" data-text="Preguntas Frecuentes /// FAQ_Database">Preguntas Frecuentes /// FAQ_Database</h2>
       <div class="faqs-container content-box">
           <div class="faq-item">
               <div class="faq-question">¿Tiempo estimado de entrega de proyecto? [Query: ETA]</div>
               <div class="faq-answer">El tiempo varía según complejidad (2-6 semanas base). Ajustable a necesidades específicas. Contactar para análisis detallado.</div>
           </div>
           <div class="faq-item">
               <div class="faq-question">¿Ofrecen mantenimiento post-entrega? [Query: Maintenance]</div>
               <div class="faq-answer">Afirmativo. Disponibles planes de soporte y mantenimiento para asegurar operatividad y actualizaciones continuas del sistema.</div>
           </div>
           <div class="faq-item">
               <div class="faq-question">¿Capacidad para proyectos internacionales? [Query: Global]</div>
               <div class="faq-answer">Confirmado. Experiencia con clientes globales. Adaptabilidad a diferentes zonas horarias y requerimientos interculturales.</div>
           </div>
           <div class="faq-item">
               <div class="faq-question">¿Cómo solicitar presupuesto personalizado? [Query: Quote]</div>
               <div class="faq-answer">Enviar un mensaje encriptado (correo electrónico) a <a href="mailto:jarmando2965@gmail.com" class="hud-link">jarmando2965@gmail.com</a> con detalles del proyecto. Respuesta prioritaria asegurada.</div>
           </div>
       </div>
    </section>

    <!-- CONTACT -->
    <section class="contact-section section-container reveal" id="contact">
       <h2 class="section-title glitch-text" data-text="Contacto /// Comms_Link" id="contactTitle">Contacto /// Comms_Link</h2>
       <p id="contactIntro">
           Estableciendo conexión... ¿Listo para iniciar tu próximo proyecto digital?
           Fusionamos tecnología, arte e interacción. Abre un canal de comunicación.
       </p>
       <a href="mailto:jarmando2965@gmail.com" class="hud-button primary large contact-button" id="contactBtn">Iniciar Transmisión</a>
    </section>

    <!-- Footer Minimalist -->
    <footer class="main-footer">
      <p id="footerCopy">© 2025 Ing. Espinosa Martínez José Armando. /// System Integrity Verified.</p>
      <div class="footer-links">
          <a href="#" class="hud-link small">Privacy_Protocol</a> | <a href="#" class="hud-link small">Terms_Of_Service</a>
      </div>
      <div class="social-links">
         <a href="https://www.linkedin.com" target="_blank" rel="noopener noreferrer" class="hud-link social" aria-label="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
         <a href="https://github.com" target="_blank" rel="noopener noreferrer" class="hud-link social" aria-label="GitHub"><i class="fab fa-github"></i></a>
         <a href="https://dribbble.com" target="_blank" rel="noopener noreferrer" class="hud-link social" aria-label="Dribbble"><i class="fab fa-dribbble"></i></a>
      </div>
    </footer>

  </div> <!-- End of .main-content-wrapper -->

  <!-- ============================================================
       MODALS
  ============================================================ -->
  <div id="modal-cert1" class="modal"><div class="modal-content content-box"><span class="close-modal">&times;</span><h3>[IBM] Web Dev Foundations</h3><p>Curso introductorio completo a HTML, CSS, & JavaScript por IBM. Fundamentos esenciales para desarrollo web moderno.</p><p>Emitido: IBM // Fecha: 05/03/2025</p><p><a href="https://coursera.org/verify/CZ47JIW4L9Y" target="_blank" rel="noopener noreferrer" class="hud-link">Verificar Credencial [Ext]</a></p></div></div>
  <div id="modal-cert2" class="modal"><div class="modal-content content-box"><span class="close-modal">&times;</span><h3>[IBM] Generative AI for Software Development</h3><p>Capacitación en IA Generativa aplicada al desarrollo de software para optimización y automatización de procesos.</p><p>Emitido: IBM // Fecha: 10/04/2025</p><p><a href="https://coursera.org/verify/F046N23FJU08" target="_blank" rel="noopener noreferrer" class="hud-link">Verificar Credencial [Ext]</a></p></div></div>
  <div id="modal-cert3" class="modal"><div class="modal-content content-box"><span class="close-modal">&times;</span><h3>[IBM] Mastering Git and GitHub</h3><p>Curso intensivo sobre control de versiones con Git y GitHub. Best practices para colaboración eficiente en proyectos.</p><p>Emitido: IBM // Fecha: 15/04/2025</p><p><a href="https://www.coursera.org/account/accomplishments/verify/CWRQOJ19Z102" target="_blank" rel="noopener noreferrer" class="hud-link">Verificar Credencial [Ext]</a></p></div></div>
  <div id="modal-cert4" class="modal"><div class="modal-content content-box"><span class="close-modal">&times;</span><h3>[Google] Foundations of Cybersecurity</h3><p>Curso especializado en fundamentos de ciberseguridad. Estrategias y herramientas para protección de datos digitales.</p><p>Emitido: Google // Fecha: 28/03/2025</p><p><a href="https://www.coursera.org/account/accomplishments/verify/F046JNZ3FUO9" target="_blank" rel="noopener noreferrer" class="hud-link">Verificar Credencial [Ext]</a></p></div></div>


  <!-- ============================================================
       AUDIO ELEMENTS
       ------------------------------------------------------------
  ============================================================ -->

  <audio id="loadingAudio" loop preload="auto"> <source src="Evidencias/Audio/Sound-mp3/terminal.mp3" type="audio/mpeg"> </audio>
  <audio id="loadCompleteAudio" preload="auto"> <source src="Evidencias/Audio/Sound-mp3/aviso.mp3" type="audio/mpeg"> </audio>
  <audio id="backgroundAudio" loop preload="auto"> <source src="Audio/Hybrid & Dark.mp3" type="audio/mpeg"> </audio>
  <audio id="uiClickAudio" preload="auto"> <source src="Audio/ui_click.mp3" type="audio/mpeg"> </audio>
  <audio id="uiHoverAudio" preload="auto"> <source src="Audio/botones/botón UI haga clic en 1.mp3" type="audio/mpeg"> </audio>
  <audio id="filterHoverAudio" preload="auto"> <source src="Evidencias/Audio/Sound-mp3/click 2.mp3" type="audio/mpeg"> </audio>


  <!-- ============================================================ -->
  <!-- JavaScript Logic (Unified)                                   -->
  <!-- ============================================================ -->
  <!-- Note: Some elements like chart canvas might need placeholder content or text without JS -->
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/tsparticles@2.9.3/tsparticles.bundle.min.js"></script>
  <!-- Assumed particles.js init script -->
   <script src="js/particles-init.js"></script>


  <script>
    "use strict";

    document.addEventListener('DOMContentLoaded', () => {

        // ============================================================
        // SELECTORS
        // ============================================================
        const loaderOverlayEl = document.getElementById('loaderOverlay');
        const loaderBar = document.getElementById('loaderBar');
        const loaderPercentage = document.getElementById('loaderPercentage');
        const loaderText = document.getElementById('loaderText');
        const loaderSubtext = document.getElementById('loaderSubtext');
        const mainHeader = document.getElementById('mainHeader');
        const mainContent = document.getElementById('mainContent');
        const hudOverlay = document.querySelector('.hud-overlay');
        const hudClock = document.getElementById('hudClock');
        const hudScrollIndicator = document.getElementById('hudScrollIndicator');
        const filterBtn = document.getElementById('filter-btn');
        const filterPanel = document.getElementById('filter-panel');
        const filterOverlay = document.getElementById('filterOverlay');
        const themeToggle = document.getElementById('themeToggle');
        const langToggle = document.getElementById('langToggle');
        const muteButton = document.getElementById('muteButton');
        const htmlEl = document.documentElement;

        // Elements specific to this portfolio structure
        const skillFills = document.querySelectorAll('.progress-bar-fill');
        const faqItems = document.querySelectorAll('.faq-item');
        const lazyImages = document.querySelectorAll('img[data-src]');
        const searchProjectInput = document.getElementById('searchProjectInput');
        const searchProjectBtn = document.getElementById('searchProjectBtn');
        const projectGrid = document.getElementById('projectGrid');
        const allProjectItems = projectGrid ? Array.from(projectGrid.querySelectorAll('.project-item')) : [];
        const downloadButtons = document.querySelectorAll('.download-trigger');
        const modalTriggers = document.querySelectorAll('.modal-trigger');
        const modals = document.querySelectorAll('.modal');
        const closeModals = document.querySelectorAll('.close-modal');
        const testimonials = document.querySelectorAll('.testimonial');
        const carouselButtons = document.querySelectorAll('.carousel-controls button');
        const timelineItems = document.querySelectorAll('.timeline-item'); // Added for timeline beacon
        const hudCornerElements = hudOverlay ? hudOverlay.querySelectorAll('.hud-corner') : []; // For JS dot/noise animations
        const hudLineElements = hudOverlay ? hudOverlay.querySelectorAll('.hud-line') : []; // For JS streak animations

         // Get the mobile breakpoint value from CSS
        const mobileBreak = parseInt(getComputedStyle(htmlEl).getPropertyValue('--mobile-break'));


        // ============================================================
        // SOUND MANAGEMENT
        // ============================================================
        const sounds = {
            loading: document.getElementById('loadingAudio'),
            complete: document.getElementById('loadCompleteAudio'),
            background: document.getElementById('backgroundAudio'),
            click: document.getElementById('uiClickAudio'),
            hover: document.getElementById('uiHoverAudio'),
            filterHover: document.getElementById('filterHoverAudio')
        };

        let isMuted = localStorage.getItem('portfolioMuted') === 'true';

        function updateMuteButton() {
            if (!muteButton) return;
             // Ensure Font Awesome icons are present before updating opacity
             if (!muteButton.querySelector('.fa-volume-up')) {
                  muteButton.innerHTML = '<i class="fas fa-volume-up"></i><i class="fas fa-volume-mute mute-slash"></i>';
             }
            const volumeUp = muteButton.querySelector('.fa-volume-up');
            const volumeMute = muteButton.querySelector('.fa-volume-mute');

            if (isMuted) {
                muteButton.classList.add('muted');
                muteButton.setAttribute('aria-label', 'Activar Sonidos');
                 if (volumeUp) volumeUp.style.opacity = '0.3';
                 if (volumeMute) volumeMute.style.opacity = '1';

            } else {
                muteButton.classList.remove('muted');
                muteButton.setAttribute('aria-label', 'Silenciar Sonidos');
                 if (volumeUp) volumeUp.style.opacity = '1';
                 if (volumeMute) volumeMute.style.opacity = '0';
            }
        }

        function playSound(soundName, volume = 0.5) {
            if (isMuted || !sounds[soundName]) return;
            try {
                sounds[soundName].volume = volume;
                sounds[soundName].currentTime = 0;
                // Using a small timeout to help with rapid clicks on some browsers
                setTimeout(() => {
                    sounds[soundName].play().catch(e => console.warn(`Error al reproducir sonido (${soundName}):`, e));
                }, 10);
            } catch (e) {
                console.warn(`Error al manejar sonido (${soundName}):`, e);
            }
        }

        function stopSound(soundName) {
            if (sounds[soundName]) {
                try {
                    sounds[soundName].pause();
                    sounds[soundName].currentTime = 0;
                } catch(e) {
                     console.warn("Error al detener sonido:", e);
                }
            }
        }

        // Initialise mute button and sounds
        updateMuteButton(); // Call once to set initial state and add icons if missing
        if(sounds.background) sounds.background.volume = 0.2;
        if(sounds.loading) sounds.loading.volume = 0.4;


        if (muteButton) {
            muteButton.addEventListener('click', () => {
                isMuted = !isMuted;
                localStorage.setItem('portfolioMuted', isMuted);
                updateMuteButton();
                if (isMuted) {
                    stopSound('background');
                    stopSound('loading');
                } else if (loaderOverlayEl && loaderOverlayEl.classList.contains('active')) {
                     // Only play loading if loader is active and not muted
                     playSound('loading', 0.4);
                } else if (mainContent && mainContent.classList.contains('visible')) {
                     // Only play background if content is visible and not muted
                     playSound('background', 0.2);
                }
                playSound('click', 0.6); // Click sound plays regardless of mute state (common UI pattern)
            });
        }


        // Apply click sound to interactive elements (excluding specific ones)
        document.querySelectorAll('a, button').forEach(el => {
            // Avoid adding listener if it's the mute button, filter button, or elements inside modals/filter panel
            if (el !== muteButton && el !== filterBtn && !el.closest('.modal-content') && !el.closest('.filter-panel')) {
                 el.addEventListener('click', (event) => {
                      // Add button pulse animation here as well
                      if (el.tagName === 'BUTTON' && el.classList.contains('hud-button')) {
                            el.classList.add('pulsing');
                            el.addEventListener('animationend', () => el.classList.remove('pulsing'), { once: true });
                      }
                      playSound('click', 0.5);
                      // [INTERACTION_BURST] Trigger interaction burst
                      if (window.innerWidth > mobileBreak) { // Only on non-mobile
                         createInteractionBurst(event.clientX, event.clientY);
                      }
                 });
            }
             // Add hover sound to buttons (optional)
             if (el.tagName === 'BUTTON' && el.classList.contains('hud-button') && el !== muteButton && el !== filterBtn) {
                 el.addEventListener('mouseenter', () => playSound('hover', 0.3));
             }
        });
        // Add click/hover sounds specifically to modal close buttons and filter menu links
        if(closeModals) closeModals.forEach(btn => btn.addEventListener('click', () => playSound('click', 0.4)));
        if(filterPanel) {
             filterPanel.querySelectorAll('.nav-link').forEach(link => {
                  // Click sound is handled in the filter menu JS logic already
                  link.addEventListener('mouseenter', () => playSound('filterHover', 0.5));
             });
        }


        // ============================================================
        // LOADER & TYPEWRITER EFFECT
        // ============================================================
         const typewriterSpeed = 30; // ms per character
         let typingTimeout;

         function typeWriter(element, text, callback) {
             if (!element) return;
             element.textContent = ''; // Clear existing text
             element.classList.remove('typing-complete'); // Remove class if exists
             let i = 0;
             function type() {
                 if (i < text.length) {
                     element.textContent += text.charAt(i);
                     i++;
                     typingTimeout = setTimeout(type, typewriterSpeed);
                 } else {
                     element.classList.add('typing-complete'); // Add class when typing is complete
                     if (callback) callback();
                 }
             }
             type();
         }

         function stopTypewriter() {
             clearTimeout(typingTimeout);
             if(loaderText) loaderText.classList.add('typing-complete');
             if(loaderSubtext) loaderSubtext.classList.add('typing-complete');
         }


        if (loaderOverlayEl) {
            let progress = 0;
            const loadingSteps = [
                { percent: 15, text: "Booting Kernal", subtext: "Memory check..." },
                { percent: 30, text: "Loading UI Modules", subtext: "Initializing HUD..." },
                { percent: 55, text: "Establishing Comms Link", subtext: "Verifying connection..." },
                { percent: 75, text: "Decrypting Asset Data", subtext: "Processing portfolio..." },
                { percent: 90, text: "Final System Checks", subtext: "Almost there..." },
                { percent: 100, text: "SYSTEM ONLINE", subtext: "Welcome." }
            ];
            let currentStep = 0;
            let isTyping = false;

             if (!isMuted && sounds.loading && sounds.background && sounds.background.paused) {
                 playSound('loading', 0.4);
            }


            const simulateLoading = setInterval(() => {
                progress += Math.random() * 2 + 0.5;
                progress = Math.min(progress, 100);

                if(loaderBar) loaderBar.style.width = progress + '%';
                if(loaderPercentage) loaderPercentage.textContent = Math.floor(progress) + '%';

                // Check if we should move to the next step and trigger typing
                if (currentStep < loadingSteps.length && progress >= loadingSteps[currentStep].percent && !isTyping) {
                    isTyping = true;
                    typeWriter(loaderText, loadingSteps[currentStep].text, () => {
                         typeWriter(loaderSubtext, loadingSteps[currentStep].subtext, () => {
                             isTyping = false; // Allow next step when subtext typing is done
                             // currentStep incremented in the callback to ensure sequence
                              currentStep++;
                         });
                    });
                     // Don't increment currentStep here, it's done in the inner callback
                     // currentStep++; // REMOVED - this caused skipping steps
                }

                if (progress >= 100) {
                    clearInterval(simulateLoading);
                    stopTypewriter(); // Ensure typing stops
                    stopSound('loading');
                    playSound('complete', 0.6);

                    setTimeout(() => {
                        loaderOverlayEl.classList.remove('active');

                        setTimeout(() => {
                            loaderOverlayEl.style.display = 'none';
                            if(mainHeader) mainHeader.classList.add('visible');
                            if(mainContent) mainContent.classList.add('visible');
                            if(hudOverlay) hudOverlay.classList.add('visible');
                             if (!isMuted && sounds.background) {
                                 playSound('background', 0.2);
                             }
                             triggerVisibleReveals(); // Trigger animations after content is visible
                            startClock();
                            startHudAnimations(); // Start JS-based HUD animations
                        }, 700);
                    }, 500);
                }
            }, 50);
        } else {
             // Fallback if loader overlay isn't found
            if(mainHeader) mainHeader.classList.add('visible');
            if(mainContent) mainContent.classList.add('visible');
            if(hudOverlay) hudOverlay.classList.add('visible');
             if (!isMuted && sounds.background) {
                 playSound('background', 0.2);
             }
             triggerVisibleReveals();
            startClock();
             startHudAnimations(); // Start JS-based HUD animations immediately
        }


        // ============================================================
        // HUD JS Animations ([HUD_PIXEL_DRIFT], [NOISE_FIELD], [SYSTEM_GLITCH_PIXELS], [INTERACTION_BURST])
        // ============================================================

         function startHudAnimations() {
            // Check window width *before* starting animation loops
            if (window.innerWidth <= mobileBreak) {
                 console.log("HUD JS animations disabled on small screens.");
                 return; // Disable on small screens
            }

             const cornerSize = hudCornerElements.length > 0 ? parseFloat(getComputedStyle(hudCornerElements[0]).getPropertyValue('--hud-corner-size')) : 25; // Default if element not found
             const borderSize = hudCornerElements.length > 0 ? parseFloat(getComputedStyle(hudCornerElements[0]).getPropertyValue('--hud-border-width')) : 2; // Default

             const cornerRects = [];
             if (hudOverlay && hudCornerElements.length > 0) {
                  const overlayRect = hudOverlay.getBoundingClientRect();
                  hudCornerElements.forEach(corner => {
                       const rect = corner.getBoundingClientRect();
                        let innerRect = {};
                        // Define the square area *within* the corner shape's quadrant relative to overlay
                        if (corner.classList.contains('top-left')) {
                            innerRect = {
                                x: rect.left - overlayRect.left + borderSize,
                                y: rect.top - overlayRect.top + borderSize,
                                width: cornerSize,
                                height: cornerSize
                            };
                        } else if (corner.classList.contains('top-right')) {
                             innerRect = {
                                x: rect.right - overlayRect.left - cornerSize - borderSize,
                                y: rect.top - overlayRect.top + borderSize,
                                width: cornerSize,
                                height: cornerSize
                            };
                        } else if (corner.classList.contains('bottom-left')) {
                            innerRect = {
                                x: rect.left - overlayRect.left + borderSize,
                                y: rect.bottom - overlayRect.top - cornerSize - borderSize,
                                width: cornerSize,
                                height: cornerSize
                            };
                        } else if (corner.classList.contains('bottom-right')) {
                             innerRect = {
                                x: rect.right - overlayRect.left - cornerSize - borderSize,
                                y: rect.bottom - overlayRect.top - cornerSize - borderSize,
                                width: cornerSize,
                                height: cornerSize
                            };
                        }
                       if (innerRect.width > 0 && innerRect.height > 0) { // Ensure valid rect
                            cornerRects.push(innerRect);
                       }
                  });
             }


             // [HUD_PIXEL_DRIFT] & [NOISE_FIELD] Animation Loop
             function animateRandomBitsInCorners() {
                 if (window.innerWidth <= mobileBreak || cornerRects.length === 0 || !hudOverlay) {
                      // Stop animation if on mobile or corners not found
                       return;
                 }

                 const numBits = Math.floor(Math.random() * 5 + 2); // 2 to 6 bits per interval
                 for(let i = 0; i < numBits; i++) {
                      const randomCornerIndex = Math.floor(Math.random() * cornerRects.length);
                      const targetCornerRect = cornerRects[randomCornerIndex];

                       // Create a bit element
                       const bit = document.createElement('div');
                       bit.classList.add('hud-dynamic-bit');

                       const type = Math.random() > 0.5 ? 'dot' : 'noise'; // Randomly create dots or noise blocks
                       bit.classList.add(type);

                       // Calculate random position within the target corner's inner rectangle
                       const posX = targetCornerRect.x + Math.random() * targetCornerRect.width;
                       const posY = targetCornerRect.y + Math.random() * targetCornerRect.height;

                       bit.style.left = `${posX}px`;
                       bit.style.top = `${posY}px`;

                       // Apply animation
                       bit.style.animation = `dot-fade-scale ${Math.random() * 1 + 0.5}s ease-out forwards`;

                       // Append and set removal listener
                       hudOverlay.appendChild(bit);
                       bit.addEventListener('animationend', () => {
                           bit.remove();
                       }, { once: true });
                 }

                 // Schedule next batch
                 setTimeout(animateRandomBitsInCorners, Math.random() * 300 + 100); // Wait 100ms to 400ms
             }

             // [SYSTEM_GLITCH_PIXELS] Animation Loop
             function animateGlitchPixels() {
                 if (window.innerWidth <= mobileBreak || !hudOverlay) {
                      return;
                 }

                 // Only create glitches occasionally
                 if (Math.random() > 0.95) { // 5% chance each interval
                      const numGlitches = Math.floor(Math.random() * 3 + 1); // 1 to 3 glitch pixels
                      for(let i = 0; i < numGlitches; i++) {
                           const glitchPixel = document.createElement('div');
                           glitchPixel.classList.add('hud-dynamic-bit', 'glitch');

                           // Random position anywhere on the screen
                           const posX = Math.random() * window.innerWidth;
                           const posY = Math.random() * window.innerHeight;

                           glitchPixel.style.left = `${posX}px`;
                           glitchPixel.style.top = `${posY}px`;

                           // Animation handled by CSS class 'glitch'
                           // glitchPixel.style.animation = `glitch-pixel-fade 0.1s ease-out forwards`; // Animation is in CSS

                           hudOverlay.appendChild(glitchPixel);
                            // Remove after a very short time (slightly longer than animation)
                           setTimeout(() => glitchPixel.remove(), 200);
                      }
                 }

                 // Schedule next check
                 setTimeout(animateGlitchPixels, Math.random() * 200 + 50); // Check frequently but glitches are rare
             }


             animateRandomBitsInCorners(); // Start the corner bits animation loop
             animateGlitchPixels(); // Start the occasional glitch animation loop

             // [DATA_STREAK] CSS animation is already applied to hud-line::before
         }

         // [INTERACTION_BURST] Function
         function createInteractionBurst(x, y) {
             if (window.innerWidth <= mobileBreak || !hudOverlay) {
                 return;
             }
             const numBursts = Math.floor(Math.random() * 8 + 4); // 4 to 11 burst particles

             for(let i = 0; i < numBursts; i++) {
                 const burstBit = document.createElement('div');
                 burstBit.classList.add('hud-dynamic-bit', 'burst');

                 // Position it at the click location (relative to viewport)
                 burstBit.style.left = `${x}px`;
                 burstBit.style.top = `${y}px`;

                 // Calculate random direction and distance
                 const angle = Math.random() * Math.PI * 2;
                 const distance = Math.random() * 30 + 20; // Move 20px to 50px
                 const moveX = Math.cos(angle) * distance;
                 const moveY = Math.sin(angle) * distance;

                 // Set CSS variables for animation
                 burstBit.style.setProperty('--burst-x', `${moveX}px`);
                 burstBit.style.setProperty('--burst-y', `${moveY}px`);

                 // Animation handled by CSS class 'burst'
                 burstBit.style.animation = `burst-out 0.5s ease-out forwards`; // Animation is in CSS

                 hudOverlay.appendChild(burstBit);

                 // Remove after animation finishes
                 burstBit.addEventListener('animationend', () => {
                     burstBit.remove();
                 }, { once: true });
             }
         }


        // ============================================================
        // FILTER MENU
        // ============================================================
        if (filterBtn && filterPanel && filterOverlay) {
            filterBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                playSound('click');
                filterPanel.classList.toggle('open');
                filterOverlay.classList.toggle('open');
                 // Manage pointer events
                 if (filterPanel.classList.contains('open')) {
                     filterPanel.style.pointerEvents = 'auto';
                     filterOverlay.style.pointerEvents = 'auto';
                 } else {
                     // Use a slight delay for pointer-events: none to allow click sound/animation
                     const transitionDuration = parseFloat(getComputedStyle(filterPanel).transitionDuration) * 1000;
                     setTimeout(() => {
                          filterPanel.style.pointerEvents = 'none';
                          filterOverlay.style.pointerEvents = 'none';
                     }, transitionDuration);
                 }
            });

            filterOverlay.addEventListener('click', () => {
                playSound('click', 0.4);
                filterPanel.classList.remove('open');
                filterOverlay.classList.remove('open');
                 const transitionDuration = parseFloat(getComputedStyle(filterPanel).transitionDuration) * 1000;
                 setTimeout(() => {
                     filterPanel.style.pointerEvents = 'none';
                     filterOverlay.style.pointerEvents = 'none';
                 }, transitionDuration);
            });

            document.addEventListener('click', (e) => {
                if (filterPanel.classList.contains('open') && !filterPanel.contains(e.target) && !filterBtn.contains(e.target)) {
                    filterPanel.classList.remove('open');
                    filterOverlay.classList.remove('open');
                     const transitionDuration = parseFloat(getComputedStyle(filterPanel).transitionDuration) * 1000;
                     setTimeout(() => {
                         filterPanel.style.pointerEvents = 'none';
                         filterOverlay.style.pointerEvents = 'none';
                     }, transitionDuration);
                }
            });

            const filterLinks = filterPanel.querySelectorAll('.nav-link');
            filterLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    playSound('click');
                    const targetHref = link.getAttribute('href');
                    filterPanel.classList.remove('open');
                    filterOverlay.classList.remove('open');
                     const transitionDuration = parseFloat(getComputedStyle(filterPanel).transitionDuration) * 1000;
                     setTimeout(() => {
                         filterPanel.style.pointerEvents = 'none';
                         filterOverlay.style.pointerEvents = 'none';
                     }, transitionDuration);

                    if (targetHref && targetHref.startsWith('#')) {
                        e.preventDefault();
                        smoothScrollTo(targetHref);
                    }
                });
                link.addEventListener('mouseenter', () => {
                    playSound('filterHover', 0.5);
                });
            });
        }


        // ============================================================
        // SMOOTH SCROLL
        // ============================================================
        function smoothScrollTo(targetSelector) {
            const targetElement = document.querySelector(targetSelector);
            if (targetElement && mainHeader) {
                const headerOffset = mainHeader.offsetHeight + 20;
                const elementPosition = targetElement.getBoundingClientRect().top;
                const offsetPosition = elementPosition + window.scrollY - headerOffset; // Corrected window.pageYOffset to window.scrollY

                window.scrollTo({
                    top: offsetPosition,
                    behavior: 'smooth'
                });
            } else if (targetElement) {
                 targetElement.scrollIntoView({ behavior: 'smooth'});
            }
        }

        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            if (!anchor.closest('.carousel-controls') && !anchor.closest('.modal-content') && !anchor.closest('.filter-panel') && anchor.getAttribute('href') !== '#' && anchor.getAttribute('href') !== '#0') { // Added check for #0
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    playSound('click');
                    smoothScrollTo(this.getAttribute('href'));
                });
            }
        });


        // ============================================================
        // REVEAL ANIMATION (SCROLL) & SECTION SCAN
        // ============================================================
        const revealElements = document.querySelectorAll('.reveal');
        if (typeof IntersectionObserver !== 'undefined') {
            const revealObserver = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        setTimeout(() => {
                            entry.target.classList.add('visible');
                            triggerProgressBars(entry.target); // Animate bars inside revealed section
                        }, 50);
                    } else {
                         // Optional: remove visible class to re-trigger on scroll back up
                         // entry.target.classList.remove('visible');
                         // resetProgressBars(entry.target);
                    }
                });
            }, {
                root: null,
                threshold: 0.1, // Start reveal when 10% of the element is visible
                rootMargin: '0px 0px -50px 0px'
            });

            revealElements.forEach(el => revealObserver.observe(el));
        } else {
             // Fallback for no IntersectionObserver support
            revealElements.forEach(el => {
                el.classList.add('visible');
                 triggerProgressBars(el); // Trigger bars on fallback
            });
        }

        // Manually trigger reveals for visible elements on page load
        function triggerVisibleReveals() {
             revealElements.forEach(el => {
                 const rect = el.getBoundingClientRect();
                 // Check if the element is currently in the viewport
                 if (rect.top < window.innerHeight && rect.bottom >= 0 && rect.left < window.innerWidth && rect.right >= 0) {
                     el.classList.add('visible');
                     triggerProgressBars(el); // Also trigger bars for initially visible sections
                     // Trigger section scan only on non-mobile if using CSS animation
                     if (window.innerWidth > mobileBreak && el.classList.contains('section-container')) {
                          // Adding .visible class already triggers the CSS ::before/::after animations
                     }
                 }
             });
        }


        // ============================================================
        // DYNAMIC PROGRESS BARS (SKILLS) & Sparkle
        // ============================================================
         function triggerProgressBars(containerElement) {
             const bars = containerElement.querySelectorAll('.progress-bar-fill');
             bars.forEach(bar => {
                 const level = bar.getAttribute('data-skill-level');
                 const container = bar.closest('.progress-bar-container');

                 // Use a flag or check current width to avoid re-animating bars that are already full
                 // Also check if container exists before accessing it
                 if (level && container && (bar.style.width === '' || bar.style.width === '0%' || parseFloat(bar.style.width) < parseFloat(level))) {
                     // Temporarily remove transition to set initial state if needed, then re-add
                     bar.style.transition = 'none';
                     bar.style.width = '0%';
                     // Add class to container to trigger sparkle animation *before* width transition
                     container.classList.remove('animate-fill'); // Reset
                     requestAnimationFrame(() => { // Use rAF for next frame update
                          requestAnimationFrame(() => {
                            bar.style.transition = 'width 1.5s ease-out';
                             container.classList.add('animate-fill'); // Start sparkle animation CSS
                            bar.style.width = level + '%';
                            // Update data-label attribute on the container for CSS ::after
                            container.setAttribute('data-label', level);
                            // Store level on the fill for CSS animation duration calculation
                            bar.style.setProperty('--skill-level', level);

                             // Optional: Remove sparkle class after animation finishes if not looping
                             // bar.addEventListener('transitionend', () => container.classList.remove('animate-fill'), { once: true });
                          });
                     });
                 }
             });
         }
          // Optional: Function to reset progress bars (if removing .visible class)
          /*
         function resetProgressBars(containerElement) {
              const bars = containerElement.querySelectorAll('.progress-bar-fill');
              bars.forEach(bar => {
                   bar.style.transition = 'none'; // Remove transition when resetting
                   bar.style.width = '0%';
                   const container = bar.closest('.progress-bar-container');
                   if(container) {
                       container.setAttribute('data-label', '0'); // Reset label
                       container.classList.remove('animate-fill'); // Stop sparkle animation
                   }
              });
         }
         */


        // ============================================================
        // TESTIMONIALS CAROUSEL
        // ============================================================
        let currentTestimonialIndex = 0;

        function changeTestimonial(index) {
            if (index === currentTestimonialIndex || testimonials.length === 0) return;
            playSound('click', 0.4);
            testimonials[currentTestimonialIndex].classList.remove('active');
            if(carouselButtons[currentTestimonialIndex]) carouselButtons[currentTestimonialIndex].classList.remove('active');
            currentTestimonialIndex = index;
            testimonials[currentTestimonialIndex].classList.add('active');
            if(carouselButtons[currentTestimonialIndex]) carouselButtons[currentTestimonialIndex].classList.add('active');
             // Ensure visibility if carousel is inside a reveal section
             // The reveal observer should handle showing the section. Testimonial activation is internal.
        }

        if(testimonials.length > 0 && carouselButtons.length > 0) {
            carouselButtons.forEach((btn, i) => {
                btn.addEventListener('click', () => changeTestimonial(i));
            });
            // Initial state
            testimonials[0].classList.add('active');
            carouselButtons[0].classList.add('active');
        }


        // ============================================================
        // LIGHT/DARK MODE TOGGLE
        // ============================================================
        const translationsForThemeToggle = {
             '#themeToggle': {
                 es: { light: 'DRK', dark: 'LGT' },
                 en: { light: 'DRK', dark: 'LGT' }
             }
         };

        function applyTheme(theme) {
            htmlEl.setAttribute('data-theme', theme);
            const currentLang = localStorage.getItem('portfolioLang') || 'es';
             if (themeToggle && translationsForThemeToggle['#themeToggle']?.[currentLang]?.[theme]) {
                 themeToggle.textContent = translationsForThemeToggle['#themeToggle'][currentLang][theme];
             }
            localStorage.setItem('portfolioTheme', theme);
        }

        if (themeToggle) {
            themeToggle.addEventListener('click', () => {
                playSound('click');
                const currentTheme = htmlEl.getAttribute('data-theme') || 'dark';
                applyTheme(currentTheme === 'dark' ? 'light' : 'dark');
            });
        }

        const savedTheme = localStorage.getItem('portfolioTheme');
        applyTheme(savedTheme || 'dark');


        // ============================================================
        // INTERNATIONALIZATION (i18n)
        // ============================================================
         const translations = {
            'heroTitle': { es: 'PORTAFOLIO DE INMORTAL', en: 'IMMORTAL PORTFOLIO [SYS]' },
            'heroSubtitle': { es: 'Creando experiencias digitales imposibles, fusionando estética, tecnología y efectos glitch que desafían la lógica, con auroras danzantes y partículas interactivas.', en: 'Crafting impossible digital experiences, merging aesthetics, technology, and reality-defying glitch effects, with dancing auroras and interactive particles.' },
            '#about .section-title': { es: 'Sobre Mí /// User_Profile', en: 'About Me /// User_Profile' },
            'aboutText': {
                es: `<p>Soy un desarrollador apasionado por la creación de experiencias digitales innovadoras. Con una sólida formación en diseño y programación, me especializo en fusionar estética y funcionalidad para ofrecer soluciones que no solo son visualmente atractivas sino también altamente eficientes.</p><p>Mi enfoque se centra en entender las necesidades de mis clientes y usuarios para desarrollar proyectos que superen sus expectativas. Siempre busco estar al día con las últimas tendencias y tecnologías para asegurar que cada proyecto sea relevante y de vanguardia.</p>`,
                en: `<p>I am a developer passionate about creating innovative digital experiences. With a solid background in design and programming, I specialize in merging aesthetics and functionality to provide solutions that are not only visually appealing but also highly efficient.</p><p>My approach focuses on understanding clients' and users' needs to develop projects that exceed their expectations. I always seek to stay up-to-date with the latest trends and technologies to ensure each project is relevant and cutting-edge.</p>`
            },
            '#skills .section-title': { es: 'Habilidades /// Skill_Matrix', en: 'Skills /// Skill_Matrix'},
            '.skill-level': { 'Nivel: Experto // 90%': { es: 'Nivel: Experto // 90%', en: 'Level: Expert // 90%'}, 'Nivel: Avanzado // 85%': { es: 'Nivel: Avanzado // 85%', en: 'Level: Advanced // 85%'}, 'Nivel: Avanzado // 80%': { es: 'Nivel: Avanzado // 80%', en: 'Level: Advanced // 80%'}, 'Nivel: Intermedio // 75%': { es: 'Nivel: Intermedio // 75%', en: 'Level: Intermediate // 75%'}, 'Nivel: Intermedio // 70%': { es: 'Nivel: Intermedio // 70%', en: 'Level: Intermediate // 70%'}, 'Nivel: En Progreso // 60%': { es: 'Nivel: En Progreso // 60%', en: 'Level: In Progress // 60%'}, 'Nivel: Experto // 90%': { es: 'Nivel: Experto // 90%', en: 'Level: Expert // 90%'}, 'Nivel: Avanzado // 80%': { es: 'Nivel: Avanzado // 80%', en: 'Level: Advanced // 80%'}}, // More granular skill level translation
            '#proyectos .section-title': { es: 'Proyectos Destacados /// Portfolio_Data', en: 'Featured Projects /// Portfolio_Data'},
            '#searchProjectInput::placeholder': { es: 'Filtrar proyectos por nombre/descripción...', en: 'Filter projects by name/description...' },
            '#searchProjectBtn': { es: 'Buscar', en: 'Search' },
             '#timeline .section-title': { es: 'Cronología /// Career_Log', en: 'Timeline /// Career_Log' },
             '#achievements .section-title': { es: 'Reconocimientos y Logros /// Accolade_Registry', en: 'Awards & Achievements /// Accolade_Registry' },
              '.achievement-item h4': {
                  'Hackathon Futurista 2022': { es: 'Hackathon Futurista 2022', en: 'Futurist Hackathon 2022'},
                  'Certificación React Avanzado': { es: 'Certificación React Avanzado', en: 'Advanced React Certification'},
                  'Diploma en UX/UI Design': { es: 'Diploma en UX/UI Design', en: 'Diploma in UX/UI Design'},
                  'Mención Honorífica - Tesis': { es: 'Mención Honorífica - Tesis', en: 'Honorable Mention - Thesis'},
              },
              '.achievement-item p': {
                   'Ganador del primer lugar en la categoría de Mejor Diseño Interactivo. [Code: HF2022_WIN]': { es: 'Ganador del primer lugar en la categoría de Mejor Diseño Interactivo. [Code: HF2022_WIN]', en: 'First place winner in the Best Interactive Design category. [Code: HF2022_WIN]'},
                   'Expedido por Platzi, demostrando dominio de la librería. [CertID: PLZ_RCT_ADV]': { es: 'Expedido por Platzi, demostrando dominio de la librería. [CertID: PLZ_RCT_ADV]', en: 'Issued by Platzi, demonstrating library mastery. [CertID: PLZ_RCT_ADV]'},
                   'Formación completa en experiencia de usuario y diseño de interfaces. [CertID: UXUI_DPL]': { es: 'Formación completa en experiencia de usuario y diseño de interfaces. [CertID: UXUI_DPL]', en: 'Comprehensive training in user experience and interface design. [CertID: UXUI_DPL]'},
                   'Por Universidad XYZ, reconociendo proyecto sobre accesibilidad web. [Ref: UNIVXYZ_ACC_TH]': { es: 'Por Universidad XYZ, reconociendo proyecto sobre accesibilidad web. [Ref: UNIVXYZ_ACC_TH]', en: 'By XYZ University, recognizing project on web accessibility. [Ref: UNIVXYZ_ACC_TH]'},
              },
             '#certificados .section-title': { es: 'Certificados Digitales /// Credential_Vault', en: 'Digital Certificates /// Credential_Vault' },
              '.certification-overlay h3': {
                  '[IBM] Web Dev Foundations': { es: '[IBM] Web Dev Foundations', en: '[IBM] Web Dev Foundations'},
                   '[IBM] Generative AI Dev': { es: '[IBM] Generative AI Dev', en: '[IBM] Generative AI Dev'},
                  '[IBM] Git & GitHub Mastery': { es: '[IBM] Git & GitHub Mastery', en: '[IBM] Git & GitHub Mastery'},
                   '[Google] Cybersecurity Foundations': { es: '[Google] Cybersecurity Foundations', en: '[Google] Cybersecurity Foundations'},
              },
              '.certification-overlay p': {
                   'HTML, CSS, JavaScript Essentials.': { es: 'HTML, CSS, JavaScript Essentials.', en: 'HTML, CSS, JavaScript Essentials.'},
                   'AI aplicada a Software Engineering.': { es: 'AI aplicada a Software Engineering.', en: 'AI applied to Software Engineering.'},
                   'Version Control & Collaboration.': { es: 'Version Control & Collaboration.', en: 'Version Control & Collaboration.'},
                   'Protecting Digital Assets.': { es: 'Protecting Digital Assets.', en: 'Protecting Digital Assets.'},
                  'Emitido: 05/03/2025': { es: 'Emitido: 05/03/2025', en: 'Issued: 03/05/2025'},
                  'Emitido: 10/04/2025': { es: 'Emitido: 10/04/2025', en: 'Issued: 04/10/2025'},
                  'Emitido: 15/04/2025': { es: 'Emitido: 15/04/2025', en: 'Issued: 04/15/2025'},
                  'Emitido: 28/03/2025': { es: 'Emitido: 28/03/2025', en: 'Issued: 03/28/2025'},
              },
              '.certification-overlay button': { es: 'Ver Credencial', en: 'View Credential' },
              '.modal-content h3': {
                   '[IBM] Web Dev Foundations': { es: '[IBM] Web Dev Foundations', en: '[IBM] Web Dev Foundations'},
                   '[IBM] Generative AI for Software Development': { es: '[IBM] Generative AI for Software Development', en: '[IBM] Generative AI for Software Development'},
                   '[IBM] Mastering Git and GitHub': { es: '[IBM] Mastering Git and GitHub', en: '[IBM] Mastering Git and GitHub'},
                   '[Google] Foundations of Cybersecurity': { es: '[Google] Foundations of Cybersecurity', en: '[Google] Foundations of Cybersecurity'},
              },
              '.modal-content p': {
                   'Curso introductorio completo a HTML, CSS, & JavaScript por IBM. Fundamentos esenciales para desarrollo web moderno.': { es: 'Curso introductorio completo a HTML, CSS, & JavaScript por IBM. Fundamentos esenciales para desarrollo web moderno.', en: 'Complete introductory course to HTML, CSS, & JavaScript by IBM. Essential foundations for modern web development.'},
                   'Capacitación en IA Generativa aplicada al desarrollo de software para optimización y automatización de procesos.': { es: 'Capacitación en IA Generativa aplicada al desarrollo de software para optimización y automatización de procesos.', en: 'Training in Generative AI applied to software development for process optimization and automation.'},
                   'Curso intensivo sobre control de versiones con Git y GitHub. Best practices para colaboración eficiente en proyectos.': { es: 'Curso intensivo sobre control de versiones con Git y GitHub. Best practices para colaboración eficiente en proyectos.', en: 'Intensive course on version control with Git and GitHub. Best practices for efficient project collaboration.'},
                   'Curso especializado en fundamentos de ciberseguridad. Estrategias y herramientas para protección de datos digitales.': { es: 'Curso especializado en fundamentos de ciberseguridad. Estrategias y herramientas para protección de datos digitales.', en: 'Specialized course on cybersecurity foundations. Strategies and tools for protecting digital assets.'},
                  'Emitido: IBM // Fecha: 05/03/2025': { es: 'Emitido: IBM // Fecha: 05/03/2025', en: 'Issued: IBM // Date: 03/05/2025'},
                   'Emitido: IBM // Fecha: 10/04/2025': { es: 'Emitido: IBM // Fecha: 10/04/2025', en: 'Issued: IBM // Date: 04/10/2025'},
                   'Emitido: 15/04/2025': { es: 'Emitido: IBM // Fecha: 15/04/2025', en: 'Issued: IBM // Date: 04/15/2025'},
                  'Emitido: Google // Fecha: 28/03/2025': { es: 'Emitido: Google // Fecha: 28/03/2025', en: 'Issued: Google // Date: 03/28/2025'},
                   'Verificar Credencial [Ext]': { es: 'Verificar Credencial [Ext]', en: 'Verify Credential [Ext]'},
              },
             '#process .section-title': { es: 'Proceso de Trabajo /// Workflow_Protocol', en: 'Work Process /// Workflow_Protocol' },
              '.process-step h4': {
                   'Análisis': { es: 'Análisis', en: 'Analysis'},
                   'Diseño': { es: 'Diseño', en: 'Design'},
                   'Desarrollo': { es: 'Desarrollo', en: 'Development'},
                   'Pruebas': { es: 'Pruebas', en: 'Testing'},
                   'Entrega': { es: 'Entrega', en: 'Delivery'},
              },
              '.process-step p': {
                   'Comprensión profunda de requerimientos, investigación de mercado y alineación estratégica con el cliente. Estableciendo vector inicial.': { es: 'Comprensión profunda de requerimientos, investigación de mercado y alineación estratégica con el cliente. Estableciendo vector inicial.', en: 'Deep understanding of requirements, market research, and strategic alignment with the client. Establishing initial vector.'},
                   'Creación de wireframes, mockups interactivos y prototipos funcionales. Priorizando UX/UI óptima y estética definida. Arquitectura visual.': { es: 'Creación de wireframes, mockups interactivos y prototipos funcionales. Priorizando UX/UI óptima y estética definida. Arquitectura visual.', en: 'Creation of wireframes, interactive mockups, and functional prototypes. Prioritizing optimal UX/UI and defined aesthetics. Visual architecture.'},
                   'Implementación con tecnologías adecuadas, código limpio y eficiente, siguiendo buenas prácticas y seguridad. Fase de compilación.': { es: 'Implementación con tecnologías adecuadas, código limpio y eficiente, siguiendo buenas prácticas y seguridad. Fase de compilación.', en: 'Implementation with appropriate technologies, clean and efficient code, following best practices and security. Compilation phase.'},
                   'QA exhaustiva, depuración de errores, optimización de rendimiento y pruebas de compatibilidad cross-browser/device. Protocolo de validación.': { es: 'QA exhaustiva, depuración de errores, optimización de rendimiento y pruebas de compatibilidad cross-browser/device. Protocolo de validación.', en: 'Exhaustive QA, bug debugging, performance optimization, and cross-browser/device compatibility testing. Validation protocol.'},
                   'Despliegue controlado, entrega de documentación completa y soporte post-lanzamiento para estabilidad y éxito continuo. Misión completada.': { es: 'Despliegue controlado, entrega de documentación completa y soporte post-lanzamiento para estabilidad y éxito continuo. Misión completada.', en: 'Controlled deployment, delivery of complete documentation, and post-launch support for continued stability and success. Mission accomplished.'},
              },
             '#blog .section-title': { es: 'Blog /// Knowledge_Base', en: 'Blog /// Knowledge_Base' },
              '.blog-item h3': {
                  'Cómo Empezar con React': { es: 'Cómo Empezar con React', en: 'Getting Started with React'},
                  'Optimización SEO 2024': { es: 'Optimización SEO 2024', en: 'SEO Optimization 2024'},
                   'Diseño Responsivo: Claves': { es: 'Diseño Responsivo: Claves', en: 'Responsive Design: Key Principles'},
                   'Introducción a la IA': { es: 'Introducción a la IA', en: 'Introduction to AI'},
              },
              '.blog-item p': {
                   'React: Biblioteca JS para UIs. Exploramos fundamentos para tu primer proyecto. [Entry: React_Basics]': { es: 'React: Biblioteca JS para UIs. Exploramos fundamentos para tu primer proyecto. [Entry: React_Basics]', en: 'React: JS library for UIs. Exploring fundamentals for your first project. [Entry: React_Basics]'},
                   'SEO: Clave para visibilidad web. Descubre best practices y estrategias para optimizar contenido. [Entry: SEO_2024]': { es: 'SEO: Clave para visibilidad web. Descubre best practices y estrategias para optimizar contenido. [Entry: SEO_2024]', en: 'SEO: Key for web visibility. Discover best practices and strategies to optimize content. [Entry: SEO_2024]'},
                   'Responsive Design: Asegura visualización óptima en cualquier dispositivo. Técnicas esenciales. [Entry: Responsive_Keys]': { es: 'Responsive Design: Asegura visualización óptima en cualquier dispositivo. Técnicas esenciales. [Entry: Responsive_Keys]', en: 'Responsive Design: Ensures optimal viewing on any device. Essential techniques. [Entry: Responsive_Keys]'},
                   'Inteligencia Artificial: Transformando industrias. Intro a conceptos básicos y aplicaciones. [Entry: AI_Intro]': { es: 'Inteligencia Artificial: Transformando industrias. Intro a conceptos básicos y aplicaciones. [Entry: AI_Intro]', en: 'Artificial Intelligence: Transforming industries. Intro to basic concepts and applications. [Entry: AI_Intro]'},
              },
              '.blog-item .hud-link': { es: 'Leer Transmisión &gt;', en: 'Read Transmission &gt;' },
              '.blog-coming-soon h3': { es: '[ Próximas Entradas // Standby ]', en: '[ Upcoming Entries // Standby ]' },
              '.blog-coming-soon p': { es: 'Procesando nuevo contenido... Mantente conectado para futuras transmisiones sobre desarrollo web, diseño avanzado, IA y más allá.', en: 'Processing new content... Stay connected for future transmissions on web development, advanced design, AI, and beyond.' },
             '#testimonialsTitle': { es: 'Testimonios /// Client_Feedback_Log', en: 'Testimonials /// Client_Feedback_Log' },
             '.testimonial p': {
                  '"Increíble trabajo, el resultado superó todas mis expectativas. La interfaz es de otro mundo."': { es: '"Increíble trabajo, el resultado superó todas mis expectativas. La interfaz es de otro mundo."', en: '"Incredible work, the result exceeded all my expectations. The interface is out of this world."'},
                   '"Profesional, creativo y fácil de colaborar. Una visión verdaderamente futurista aplicada con maestría."': { es: '"Profesional, creativo y fácil de colaborar. Una visión verdaderamente futurista aplicada con maestría."', en: '"Professional, creative, and easy to collaborate with. A truly futuristic vision applied with mastery."'},
                   '"El diseño y las animaciones elevaron nuestro producto a un nivel completamente nuevo. Impacto inmediato."': { es: '"El diseño y las animaciones elevaron nuestro producto a un nivel completamente nuevo. Impacto inmediato."', en: '"The design and animations elevated our product to a completely new level. Immediate impact."'},
             },
             '.testimonial cite': {
                  '— Juan Pérez [Ref: JP_Feedback]': { es: '— Juan Pérez [Ref: JP_Feedback]', en: '— John Perez [Ref: JP_Feedback]'},
                  '— María López [Ref: ML_Feedback]': { es: '— María López [Ref: ML_Feedback]', en: '— Maria Lopez [Ref: ML_Feedback]'},
                  '— Carlos Gómez [Ref: CG_Feedback]': { es: '— Carlos Gómez [Ref: CG_Feedback]', en: '— Carlos Gomez [Ref: CG_Feedback]'},
             },
             '#services .section-title': { es: 'Servicios /// Service_Matrix', en: 'Services /// Service_Matrix' },
              '.service-card h4': {
                  'Plan [CORE]': { es: 'Plan [CORE]', en: '[CORE] Plan'},
                   'Plan [NEXUS]': { es: 'Plan [NEXUS]', en: '[NEXUS] Plan'},
                   'Plan [AEGIS]': { es: 'Plan [AEGIS]', en: '[AEGIS] Plan'},
              },
              '.service-card p': {
                   'Ideal para proyectos personales o prototipos de pequeña escala. Presencia digital esencial.': { es: 'Ideal para proyectos personales o prototipos de pequeña escala. Presencia digital esencial.', en: 'Ideal for personal projects or small-scale prototypes. Essential digital presence.'},
                   'Perfecto para startups o negocios en crecimiento. Funcionalidad y diseño avanzados.': { es: 'Perfecto para startups o negocios en crecimiento. Funcionalidad y diseño avanzados.', en: 'Perfect for startups or growing businesses. Advanced functionality and design.'},
                   'Solución robusta para grandes compañías y proyectos complejos. Soporte y escalabilidad premium.': { es: 'Solución robusta para grandes compañías y proyectos complejos. Soporte y escalabilidad premium.', en: 'Robust solution for large companies and complex projects. Premium support and scalability.'},
                   '$49 // Ciclo Mensual': { es: '$49 // Ciclo Mensual', en: '$49 // Monthly Cycle'},
                   '$99 // Ciclo Mensual': { es: '$99 // Ciclo Mensual', en: '$99 // Monthly Cycle'},
                   '$199 // Ciclo Mensual': { es: '$199 // Ciclo Mensual', en: '$199 // Monthly Cycle'},
              },
             '.featured-tag': { es: 'RECOMENDADO', en: 'RECOMMENDED' },
              '.service-card button': {
                  'Iniciar Protocolo': { es: 'Iniciar Protocolo', en: 'Initiate Protocol'},
                  'Activar Nexus': { es: 'Activar Nexus', en: 'Activate Nexus'},
                  'Desplegar Aegis': { es: 'Desplegar Aegis', en: 'Deploy Aegis'},
              },
             '#downloads .section-title': { es: 'Descargas /// Data_Repository', en: 'Downloads /// Data_Repository' },
              '.download-item h4': {
                  'CV_JAEspinosa_v2.5.pdf': { es: 'CV_JAEspinosa_v2.5.pdf', en: 'CV_JAEspinosa_v2.5.pdf'},
                  'BestPractices_Guide_v1.pdf': { es: 'BestPractices_Guide_v1.pdf', en: 'BestPractices_Guide_v1.pdf'},
                  'JS_Snippets_Collection.pdf': { es: 'JS_Snippets_Collection.pdf', en: 'JS_Snippets_Collection.pdf'},
              },
               '.download-item p': {
                   'Currículum Vitae actualizado. Formato seguro PDF.': { es: 'Currículum Vitae actualizado. Formato seguro PDF.', en: 'Updated Curriculum Vitae. Secure PDF format.'},
                   'Guía de buenas prácticas en código y diseño responsive.': { es: 'Guía de buenas prácticas en código y diseño responsive.', en: 'Guide to best practices in code and responsive design.'},
                   'Recopilación de snippets útiles de JavaScript para desarrollo web.': { es: 'Recopilación de snippets útiles de JavaScript para desarrollo web.', en: 'Collection of useful JavaScript snippets for web development.'},
               },
               '.download-item button': { es: 'Descargar Archivo', en: 'Download File' },
             '#faqs .section-title': { es: 'Preguntas Frecuentes /// FAQ_Database', en: 'Frequently Asked Questions /// FAQ_Database' },
              '.faq-question': {
                  '¿Tiempo estimado de entrega de proyecto? [Query: ETA]': { es: '¿Tiempo estimado de entrega de proyecto? [Query: ETA]', en: 'Estimated project delivery time? [Query: ETA]'},
                  '¿Ofrecen mantenimiento post-entrega? [Query: Maintenance]': { es: '¿Ofrecen mantenimiento post-entrega? [Query: Maintenance]', en: 'Do you offer post-delivery maintenance? [Query: Maintenance]'},
                  '¿Capacidad para proyectos internacionales? [Query: Global]': { es: '¿Capacidad para proyectos internacionales? [Query: Global]', en: 'Capacity for international projects? [Query: Global]'},
                  '¿Cómo solicitar presupuesto personalizado? [Query: Quote]': { es: '¿Cómo solicitar presupuesto personalizado? [Query: Quote]', en: 'How to request a custom quote? [Query: Quote]'},
              },
              '.faq-answer': {
                   'El tiempo varía según complejidad (2-6 semanas base). Ajustable a necesidades específicas. Contactar para análisis detallado.': { es: 'El tiempo varía según complejidad (2-6 semanas base). Ajustable a necesidades específicas. Contactar para análisis detallado.', en: 'Time varies based on complexity (2-6 weeks base). Adjustable to specific needs. Contact for detailed analysis.'},
                   'Afirmativo. Disponibles planes de soporte y mantenimiento para asegurar operatividad y actualizaciones continuas del sistema.': { es: 'Afirmativo. Disponibles planes de soporte y mantenimiento para asegurar operatividad y actualizaciones continuas del sistema.', en: 'Affirmative. Support and maintenance plans are available to ensure continuous system operation and updates.'},
                   'Confirmado. Experiencia con clientes globales. Adaptabilidad a diferentes zonas horarias y requerimientos interculturales.': { es: 'Confirmado. Experiencia con clientes globales. Adaptabilidad a diferentes zonas horarias y requerimientos interculturales.', en: 'Confirmed. Experience with global clients. Adaptability to different time zones and intercultural requirements.'},
                   'Enviar un mensaje encriptado (correo electrónico) a <a href="mailto:jarmando2965@gmail.com" class="hud-link">jarmando2965@gmail.com</a> con detalles del proyecto. Respuesta prioritaria asegurada.': { es: 'Enviar un mensaje encriptado (correo electrónico) a <a href="mailto:jarmando2965@gmail.com" class="hud-link">jarmando2965@gmail.com</a> con detalles del proyecto. Respuesta prioritaria asegurada.', en: 'Send an encrypted message (email) to <a href="mailto:jarmando2965@gmail.com" class="hud-link">jarmando2965@gmail.com</a> with project details. Prioritized response guaranteed.'},
              },
            '#contactTitle': { es: 'Contacto /// Comms_Link', en: 'Contact /// Comms_Link' },
            'contactIntro': { es: 'Estableciendo conexión... ¿Listo para iniciar tu próximo proyecto digital? Fusionamos tecnología, arte e interacción. Abre un canal de comunicación.', en: 'Establishing connection... Ready to initiate your next digital project? We merge technology, art, and interaction. Open a communication channel.' },
            'contactBtn': { es: 'Iniciar Transmisión', en: 'Initiate Transmission' },
            'footerCopy': { es: '© 2025 Ing. Espinosa Martínez José Armando. /// System Integrity Verified.', en: '© 2025 Ing. Espinosa Martínez José Armando. /// System Integrity Verified.' },
            '.filter-btn': { es: 'NAV_MENU', en: 'NAV_MENU' }, // Kept as NAV_MENU as it's part of the HUD aesthetic, but added to translation object
             '.filter-panel a[href="#hero"]': { es: 'Inicio', en: 'Home' },
             '.filter-panel a[href="#about"]': { es: 'Sobre Mí', en: 'About Me' },
             '.filter-panel a[href="#skills"]': { es: 'Habilidades', en: 'Skills' },
             '.filter-panel a[href="#proyectos"]': { es: 'Proyectos', en: 'Projects' },
             '.filter-panel a[href="#timeline"]': { es: 'Cronología', en: 'Timeline' },
             '.filter-panel a[href="#achievements"]': { es: 'Logros', en: 'Achievements' },
             '.filter-panel a[href="#certificados"]': { es: 'Certificados', en: 'Certificates' },
             '.filter-panel a[href="#process"]': { es: 'Proceso', en: 'Process' },
             '.filter-panel a[href="#blog"]': { es: 'Blog', en: 'Blog' },
             '.filter-panel a[href="#testimonials"]': { es: 'Testimonios', en: 'Testimonials' },
             '.filter-panel a[href="#services"]': { es: 'Servicios', en: 'Services' },
             '.filter-panel a[href="#downloads"]': { es: 'Descargas', en: 'Downloads' },
             '.filter-panel a[href="#faqs"]': { es: 'FAQs', en: 'FAQs' },
             '.filter-panel a[href="#contact"]': { es: 'Contacto', en: 'Contact' },
             '.filter-panel a[href="Evidencias/Menu.html"]': { es: 'Evidencias', en: 'Evidence' },
        };

        let currentLang = localStorage.getItem('portfolioLang') || 'es';

        function applyLanguage(lang) {
            currentLang = lang;
            localStorage.setItem('portfolioLang', lang);
            if (langToggle) langToggle.textContent = lang === 'es' ? 'EN' : 'ES';

             // Function to apply translation to specific elements
             function applyTranslationToElement(element, textKey, lang) {
                 // Handle placeholder specifically
                 if (element.tagName === 'INPUT' && element.hasAttribute('placeholder') && translations[textKey]?.[lang] !== undefined) {
                      element.placeholder = translations[textKey][lang];
                      return; // Stop here for placeholders
                 }
                 // Handle nested text translations (e.g. skill levels, achievement titles/paragraphs, etc.)
                 let originalText = element.textContent.trim();
                 if (translations[textKey]?.[originalText]?.[lang] !== undefined) {
                      element.textContent = translations[textKey][originalText][lang];
                      return; // Stop here if nested translation found
                 }

                 // Handle standard selector translations
                 const translation = translations[textKey]?.[lang];
                 if (translation !== undefined) {
                      if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                           element.value = translation;
                       } else if (element.tagName === 'BUTTON' && element.id !== 'themeToggle' && element.id !== 'langToggle' && element.id !== 'muteButton' && element.id !== 'filter-btn' && element.className.includes('hud-button')) {
                           // Specific check for buttons that aren't the toggles/filter
                            element.textContent = translation;
                       }
                        else {
                           element.innerHTML = translation; // Use innerHTML to allow nested HTML like links in FAQs
                       }
                  }
             }


            for (const selector in translations) {
                let mainSelector = selector;
                let attribute = null; // Not strictly needed with the helper function

                if (selector.includes('::placeholder')) {
                     mainSelector = selector.split('::')[0];
                     attribute = 'placeholder'; // Just for logging/understanding
                }

                const elements = document.querySelectorAll(mainSelector);
                if (elements.length > 0) {
                    elements.forEach(element => {
                         applyTranslationToElement(element, selector, lang);
                    });
                }
            }
            applyTheme(htmlEl.getAttribute('data-theme') || 'dark'); // Re-apply theme to update button text
        }

        if (langToggle) {
            langToggle.addEventListener('click', () => {
                playSound('click');
                applyLanguage(currentLang === 'es' ? 'en' : 'es');
            });
        }

        applyLanguage(currentLang); // Apply language on load


        // ============================================================
        // LAZY LOADING FOR IMAGES
        // ============================================================
         if (typeof IntersectionObserver !== 'undefined') {
             const lazyObserver = new IntersectionObserver((entries, observer) => {
                 entries.forEach(entry => {
                     if (entry.isIntersecting) {
                         const lazyEl = entry.target;
                         lazyEl.onload = () => {
                             lazyEl.classList.add('loaded');
                             lazyEl.removeAttribute('loading');
                         };
                         lazyEl.onerror = () => {
                             console.error("Error loading image:", lazyEl.dataset.src);
                         };
                         if (lazyEl.dataset.src) { // Check if data-src exists
                            lazyEl.src = lazyEl.dataset.src;
                            lazyEl.removeAttribute('data-src');
                         }
                         observer.unobserve(lazyEl);
                     }
                 });
             }, { rootMargin: "0px 0px 200px 0px" });

             lazyImages.forEach(img => lazyObserver.observe(img));
         } else {
              // Fallback for no IntersectionObserver support
              lazyImages.forEach(img => {
                  if (img.dataset.src) { // Check if data-src exists
                     img.src = img.dataset.src;
                     img.removeAttribute('data-src');
                  }
                  img.classList.add('loaded');
              });
         }

        // ============================================================
        // PROJECT FILTER/SEARCH
        // ============================================================
        function filterProjects() {
            if (!searchProjectInput || allProjectItems.length === 0) return;
            const term = searchProjectInput.value.toLowerCase().trim();
            allProjectItems.forEach(item => {
                const title = item.querySelector('h3')?.textContent.toLowerCase() || '';
                const description = item.querySelector('p')?.textContent.toLowerCase() || '';
                const tags = Array.from(item.querySelectorAll('.tech-tags span')).map(span => span.textContent.toLowerCase()).join(' ');
                const itemText = `${title} ${description} ${tags}`;
                item.style.display = itemText.includes(term) ? '' : 'none';
            });
        }

        if (searchProjectBtn) searchProjectBtn.addEventListener('click', () => { playSound('click'); filterProjects(); });
        if (searchProjectInput) {
             searchProjectInput.addEventListener('keyup', (e) => { if (e.key === 'Enter' || searchProjectInput.value.trim() === '') { filterProjects(); if(e.key === 'Enter') playSound('click'); } });
             searchProjectInput.addEventListener('input', () => { if (searchProjectInput.value.trim() === '') filterProjects(); });
        }

        // ============================================================
        // DOWNLOADS
        // ============================================================
        downloadButtons.forEach(btn => {
            btn.addEventListener('click', () => {
                playSound('click');
                const file = btn.getAttribute('data-file');
                if (file) {
                    const link = document.createElement('a');
                    link.href = file;
                    // Use a more robust way to get the filename
                    const filename = file.substring(file.lastIndexOf('/') + 1);
                    link.download = filename;
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                } else { console.error("No data-file attribute found on download button:", btn); }
            });
        });

        // ============================================================
        // CERTIFICATE MODALS
        // ============================================================
        modalTriggers.forEach(button => {
            button.addEventListener('click', () => {
                playSound('click');
                const modalId = button.dataset.modalId;
                const modal = document.getElementById(modalId);
                if (modal) {
                     modal.classList.add('open');
                     modal.style.display = 'flex'; // Ensure it's visible
                }
                else console.error("Modal not found with ID:", modalId);
            });
        });

        function closeModal(modal) { if (modal) { playSound('click', 0.4); modal.classList.remove('open'); setTimeout(() => modal.style.display = 'none', 300); } } // Hide after transition
        closeModals.forEach(button => button.addEventListener('click', () => closeModal(button.closest('.modal'))));
        modals.forEach(modal => modal.addEventListener('click', (e) => { if (e.target === modal) closeModal(modal); }));
        document.addEventListener('keydown', (e) => { if (e.key === 'Escape') { const openModal = document.querySelector('.modal.open'); if (openModal) closeModal(openModal); } });

        // ============================================================
        // FAQ INTERACTIVE ([FAQ_PULSE])
        // ============================================================
        faqItems.forEach(item => {
            const question = item.querySelector('.faq-question');
            if(question) {
                question.addEventListener('click', () => {
                    playSound('click', 0.4);
                    item.classList.toggle('open');
                     // The CSS animation 'faq-pulse' is triggered by adding/removing the 'open' class
                });
            }
        });

        // ============================================================
        // TIMELINE BEACON ([TIMELINE_BEACON])
        // ============================================================
         if (timelineItems.length > 0 && typeof IntersectionObserver !== 'undefined') {
             const timelineObserver = new IntersectionObserver((entries) => {
                 entries.forEach(entry => {
                     if (entry.isIntersecting) {
                          entry.target.classList.add('active-beacon');
                     } else {
                          entry.target.classList.remove('active-beacon');
                     }
                 });
             }, {
                 root: null,
                 threshold: 0.5, // Activate when 50% of the item is visible
                 rootMargin: '0px 0px -20% 0px' // Consider items visible sooner when scrolling down
             });

             timelineItems.forEach(item => timelineObserver.observe(item));
         }


        // ============================================================
        // HUD UPDATES (Clock, Scroll Indicator)
        // ============================================================
        function updateClock() {
            const now = new Date();
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            const seconds = String(now.getSeconds()).padStart(2, '0');
            if (hudClock) hudClock.textContent = `${hours}:${minutes}:${seconds}`;
        }

        function startClock() { if (hudClock) { updateClock(); setInterval(updateClock, 1000); } }

        function updateScrollIndicator() {
            const bodyHeight = document.body.scrollHeight;
            const windowHeight = window.innerHeight;
             if (!hudScrollIndicator) return;

            if (bodyHeight <= windowHeight) {
                hudScrollIndicator.querySelector('span:last-child').textContent = '100%';
                return;
            }
            const scrollableHeight = bodyHeight - windowHeight;
            const scrollPercent = Math.min(100, Math.max(0, (window.scrollY / scrollableHeight) * 100));
             hudScrollIndicator.querySelector('span:last-child').textContent = `${scrollPercent.toFixed(0)}%`;
        }

        let scrollTimeout;
        window.addEventListener('scroll', () => {
            if (scrollTimeout) window.cancelAnimationFrame(scrollTimeout);
            scrollTimeout = window.requestAnimationFrame(updateScrollIndicator);
        }, { passive: true });
        updateScrollIndicator(); // Initial update


        console.log("System Interface Initialized.");

        function animateDataFlow() {
          if (window.innerWidth <= mobileBreak) return;
          // Creamos un "río" de streaks
          const river = document.createElement('div');
          river.className = 'data-river';
          hudOverlay.appendChild(river);
          // Tras 4s lo eliminamos y reiniciamos
          setTimeout(() => {
            river.remove();
            animateDataFlow();
          }, 4000);
        }
        animateDataFlow();

        function animateGlitchPixels() {
          if (window.innerWidth <= mobileBreak) return;
          if (Math.random() > 0.92) {
            const count = Math.floor(Math.random()*5 + 1);
            for (let i=0; i<count; i++) {
              const g = document.createElement('div');
              g.className = 'hud-dynamic-bit glitch';
              g.style.left = Math.random()*window.innerWidth + 'px';
              g.style.top  = Math.random()*window.innerHeight + 'px';
              hudOverlay.appendChild(g);
              setTimeout(()=> g.remove(), 200);
            }
          }
          setTimeout(animateGlitchPixels, Math.random()*150 + 50);
        }
        animateGlitchPixels();

        function createClickWave(x,y) {
          const w = document.createElement('div');
          w.className = 'click-wave';
          w.style.left = x+'px'; w.style.top = y+'px';
          hudOverlay.appendChild(w);
          w.addEventListener('animationend',()=>w.remove(),{once:true});
        }
        document.addEventListener('click', e=>{
          if (window.innerWidth>mobileBreak) createClickWave(e.clientX,e.clientY);
        });

        function animateCounter(el, target, duration=800) {
          let start = 0;
          const step = Math.ceil(target / (duration / 16));
          const tick = () => {
            start = Math.min(start + step, target);
            el.textContent = start + (el.dataset.suffix||'');
            if (start < target) requestAnimationFrame(tick);
          };
          tick();
        }
        // Ejemplo: al revelar loaderPercentage
        revealObserver = new IntersectionObserver(entries=>{
          entries.forEach(en=>{
            if(en.isIntersecting && en.target.id==='loaderPercentage') {
              const val = parseInt(en.target.textContent);
              animateCounter(en.target,val,1000);
              revealObserver.unobserve(en.target);
            }
          });
        });
        revealObserver.observe(document.getElementById('loaderPercentage'));

        document.addEventListener('touchend', e=>{
          const burst = document.createElement('div');
          burst.className = 'touch-burst';
          burst.style.left = `${e.changedTouches[0].clientX}px`;
          burst.style.top  = `${e.changedTouches[0].clientY}px`;
          document.body.append(burst);
          burst.addEventListener('animationend', ()=>burst.remove(), { once:true });
        });

        document.querySelectorAll('.project-item video').forEach(video=>{
          if(window.innerWidth<=tabletBreak){
            video.addEventListener('click', ()=>{
              const src = video.dataset.src;  // usar data-src en el source
              if(!video.src){
                video.src = src;
                video.load();
                video.play().catch(()=>{/* manejo errores */});
              }
            }, { once:true });
          }
        });

        function createDataStreak(x,y) {
          const streak = document.createElement('div');
          streak.classList.add('hud-dynamic-bit','streak');
          streak.style.left = `${x}px`;
          streak.style.top  = `${y}px`;
          // Variables CSS para la trayectoria (ya definidos en tu CSS)
          streak.style.setProperty('--move-x', `${Math.random()*(-100)+50}px`);
          streak.style.setProperty('--move-y', `${Math.random()*(-100)+50}px`);
          hudOverlay.append(streak);
          streak.addEventListener('animationend', ()=>streak.remove());
        }
        // Adjuntarlo a eventos:
        document.querySelectorAll('.hud-button.primary').forEach(btn =>
          btn.addEventListener('click', e => createDataStreak(e.clientX,e.clientY))
        );

        // CURSOR TRAIL (Canvas)
        if (window.innerWidth > mobileBreak && !window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
            const trailCanvas = document.createElement('canvas');
            trailCanvas.id = 'cursorTrail';
            document.body.appendChild(trailCanvas);
            const trailCtx = trailCanvas.getContext('2d');

            function resizeTrailCanvas() {
                trailCanvas.width = window.innerWidth;
                trailCanvas.height = window.innerHeight;
            }
            trailCanvas.style.position = 'fixed';
            trailCanvas.style.top = '0';
            trailCanvas.style.left = '0';
            trailCanvas.style.width = '100%';
            trailCanvas.style.height = '100%';
            trailCanvas.style.pointerEvents = 'none';
            trailCanvas.style.zIndex = '999';
            resizeTrailCanvas();
            window.addEventListener('resize', resizeTrailCanvas);

            window.addEventListener('mousemove', (e) => {
                trailCtx.globalCompositeOperation = 'source-over';
                trailCtx.fillStyle = 'rgba(var(--color-accent-rgb), 0.8)';
                trailCtx.beginPath();
                trailCtx.arc(e.clientX, e.clientY, 3, 0, Math.PI * 2);
                trailCtx.fill();
            });

            function animateCursorTrail() {
                requestAnimationFrame(animateCursorTrail);
                trailCtx.globalCompositeOperation = 'destination-out';
                trailCtx.fillStyle = 'rgba(0,0,0,0.05)';
                trailCtx.fillRect(0, 0, trailCanvas.width, trailCanvas.height);
            }
            animateCursorTrail();
        }

        // DECORATIVE_DATA_VIS: Animación de barras en Skills
        const skillsSection = document.getElementById('skills');
        const skillsCanvas = document.getElementById('skillsVis');
        if (skillsSection && skillsCanvas && window.innerWidth > mobileBreak) {
            const skCtx = skillsCanvas.getContext('2d');
            function resizeSkillsCanvas() {
                skillsCanvas.width = skillsSection.clientWidth;
                skillsCanvas.height = skillsSection.clientHeight;
            }
            resizeSkillsCanvas();
            window.addEventListener('resize', resizeSkillsCanvas);

            let bars = [];
            const numBars = 10;
            function initBars() {
                bars = [];
                for (let i = 0; i < numBars; i++) {
                    bars.push({
                        x: (i + 0.5) * skillsCanvas.width / numBars,
                        width: skillsCanvas.width / (numBars * 2),
                        height: Math.random() * skillsCanvas.height,
                        speed: Math.random() * 0.5 + 0.2,
                        dir: Math.random() > 0.5 ? 1 : -1
                    });
                }
            }
            function animateSkillsVis() {
                skCtx.clearRect(0, 0, skillsCanvas.width, skillsCanvas.height);
                bars.forEach(bar => {
                    bar.height += bar.speed * bar.dir;
                    if (bar.height < skillsCanvas.height * 0.1 || bar.height > skillsCanvas.height) bar.dir *= -1;
                    skCtx.fillStyle = 'rgba(var(--color-accent-rgb), 0.3)';
                    skCtx.fillRect(bar.x - bar.width / 2, skillsCanvas.height - bar.height, bar.width, bar.height);
                });
                requestAnimationFrame(animateSkillsVis);
            }
            const skillsObserver = new IntersectionObserver((entries, obs) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        initBars();
                        animateSkillsVis();
                        obs.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.3 });
            skillsObserver.observe(skillsSection);
        }

        // Aplicar efecto typewriter al texto de About
        const aboutTextEl = document.getElementById('aboutText');
        const fullText = aboutTextEl.textContent.trim();
        aboutTextEl.textContent = '';
        function typeBio(i) {
          if (i <= fullText.length) {
            aboutTextEl.textContent = fullText.slice(0, i);
            setTimeout(() => typeBio(i + 1), 20);
          }
        }
        if (document.querySelector('.about.visible')) {
          typeBio(0);
        }
    });


  <!-- Scroll streaming effect and parallax -->
  (function(){
      const scrollCanvas = document.getElementById('scrollCanvas');
      if (!scrollCanvas) return;
      const ctx = scrollCanvas.getContext('2d');
      function resize() {
          scrollCanvas.width = window.innerWidth;
          scrollCanvas.height = window.innerHeight;
      }
      resize();
      window.addEventListener('resize', resize);
      let rafId, active = false, timeout;
      function startEffect() {
          if (active) return;
          active = true;
          scrollCanvas.style.opacity = '0.2';
          function draw() {
              const y = Math.random() * scrollCanvas.height;
              ctx.fillStyle = 'rgba(var(--color-accent-rgb), 0.02)';
              ctx.fillRect(0, y, scrollCanvas.width, 1);
              rafId = requestAnimationFrame(draw);
          }
          draw();
      }
      function stopEffect() {
          active = false;
          scrollCanvas.style.opacity = '0';
          cancelAnimationFrame(rafId);
          ctx.clearRect(0, 0, scrollCanvas.width, scrollCanvas.height);
      }
      const bgVideo = document.getElementById('bg-video');
      const hud = document.querySelector('.hud-overlay');
      window.addEventListener('scroll', () => {
          if (window.innerWidth <= mobileBreak || window.matchMedia('(prefers-reduced-motion: reduce)').matches) return;
          startEffect();
          clearTimeout(timeout);
          timeout = setTimeout(stopEffect, 200);
          const s = window.scrollY;
          if (bgVideo) bgVideo.style.transform = `translateY(${s * -0.05}px)`;
          if (hud) hud.style.transform = `translateY(${s * 0.02}px)`;
      }, { passive: true });
  })();
    

    
  </script>

  
</body>
</html>